<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<title>The Nature of Code</title>
	<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
	<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
	<script type="text/javascript" src="/book/javascripts/codeprocessing.js"></script>
	<script type="text/javascript" src="/book/processingjs/processing.js"></script>
  <script type="text/javascript" src="/book/processingjs/lazyloading.js"></script>
  <script type="text/javascript" src="/book/javascripts/sketchControls.js"></script>
  <script type="text/javascript" src="/book/javascripts/jquery.fixed.js"></script>

  <script type="text/javascript" charset="utf-8">
    $(document).ready(function(){
      $('#toc-list').fixed({'top':'8'});
      $('#nav-bar-wrap').fixed({'top':'8'});

      $('span.c1').each(function(){ addStylesToCodeLines($(this)); });
      // $('code').each(function(){ inlineComments($(this)); });
      $('div.source-code').each(function(){ setRawCodeHeight($(this)); });
      $('a.toggle').click(function(){ toggleCodeDisplay($(this)); return false; });
    });
  </script>
	<link rel="stylesheet" href="/book/stylesheets/fonts.css" type="text/css">
	<link rel="stylesheet" href="/book/stylesheets/html.css" type="text/css">
	<link rel="stylesheet" href="/book/stylesheets/code-html.css">

<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-34673170-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>

<script>

    window.onload= function() {
      offsetUps = document.getElementsByClassName('offset-up');
      for(var i=0; i < offsetUps.length; i++) {
        var element = offsetUps[i];
        var comment = element.getElementsByClassName('code-comment')[0];
        var height = comment.offsetHeight;
        comment.style.top = '-' + (height) +  'px';
      }
    };
</script>

</head>
<body>

  <div id="navigator">
    <div id="navigator-inner">
      <div id='nav-bar-wrap'>
        <div id="mask"></div>
        <div id="nav-bar">
          <h1><a href="/">THE <strong>NATURE</strong> OF CODE</a></h1>
          <h2>by Daniel Shiffman</h2>
          <a id="purchase-link" href="/">Buy this book in print</a> <a id="purchase-link" href="/">Buy this book as PDF</a>
        </div>
      </div>
      <div id="toc-holder">
        <div id="toc-list">
          <ul>
            <li><a href="/book/">Welcome</a></li>
            <li><a href="/book/acknowledgments">Acknowledgments</a></li>
            <li><a href="/book/dedication">Dedication</a></li>
            <li><a href="/book/preface">Preface</a></li>
            <li><a href="/book/introduction">Introduction</a></li>
            <li><a href="/book/chapter-1-vectors">1.  Vectors</a></li>
            <li><a href="/book/chapter-2-forces">2.  Forces</a></li>
            <li><a href="/book/chapter-3-oscillation">3.  Oscillation</a></li>
            <li><a href="/book/chapter-4-particle-systems">4.  Particle Systems</a></li>
            <li><a href="/book/chapter-5-physics-libraries">5.  Physics Libraries</a></li>
            <li><a href="/book/chapter-6-autonomous-agents">6.  Autonomous Agents</a></li>
            <li><a href="/book/chapter-7-cellular-automata">7.  Cellular Automata</a></li>
            <li><a href="/book/chapter-8-fractals">8.  Fractals</a></li>
            <li><a href="/book/chapter-9-the-evolution-of-code">9.  The Evolution of Code</a></li>
            <li><a href="/book/chapter-10-neural-networks">10.  Neural Networks</a></li>
            <li><a href="/book/further-reading">Further Reading</a></li>
            <li><a href="/book/index">Index</a></li>
          </ul>
        </div>
      </div>
    </div>
  </div>

  <div id="top">
    <div id="header">
      <h1><a href="/">The <strong>Nature</strong> of Code</a></h1>
      <h2>Daniel Shiffman</h2>
    </div>
  </div>

  <div id="middle">

  	<div id="container">
  		<a id="_chapter_1_vectors" style="display: block;"></a><h2 id="chapter-1-vectors">Chapter 1.  Vectors</h2>
<blockquote >
  “Roger, Roger. What’s our vector, Victor?”
  
    <span class="attribution">
— Captain Oveur (Airplane)
</span>
  
</blockquote><p><a id="vectors-81fe6db0-253f-0130-ba69-7cd1c3f718ad" style="display: block;"></a></p>
<p>This book is all about looking at the world around us and coming up with clever ways to simulate that world with code.  Divided into three parts, the book will start by looking at basic physics—how an apple falls from a tree, a pendulum swings in the air, the earth revolves around the sun, etc.  Absolutely everything contained within the first five chapters of this book requires the use of the most basic building block for programming motion—the <strong><em>vector</em></strong>.   And so this is where we begin our story.</p>
<p><a id="euclid-81fe8df0-253f-0130-ba6a-7cd1c3f718ad" style="display: block;"></a><a id="euclidean-vector-81fe9d20-253f-0130-ba6b-7cd1c3f718ad" style="display: block;"></a><a id="geometric-vector-81fead60-253f-0130-ba6c-7cd1c3f718ad" style="display: block;"></a><a id="vectorsdefined-81febdb0-253f-0130-ba6d-7cd1c3f718ad" style="display: block;"></a></p>
<p>Now, the word vector can mean a lot of different things. Vector is the name of a New Wave rock band formed in Sacramento, CA in the early 1980s.  It’s the name of a breakfast cereal manufactured by Kellogg’s Canada.   In the field of epidemiology, a vector is used to describe an organism that transmits infection from one host to another.  In the C++ programming language, a vector (std::vector) is an implementation of a dynamically resizable array data structure.  While all these definitions are interesting, they’re not what we’re looking for.   What we want is called a <strong><em>Euclidean vector</em></strong> (named for the Greek mathematician Euclid and also known as a geometric vector).  When you see the term “vector” in this book, you can assume it refers to a Euclidean vector, defined as <em>an entity that has both magnitude and direction</em>.</p>
<p><a id="vectorsnotation-81fee470-253f-0130-ba6e-7cd1c3f718ad" style="display: block;"></a></p>
<p>A vector is typically drawn as a arrow; the direction is indicated by where the arrow is pointing, and the magnitude by the length of the arrow itself.</p>
<a id="chapter01_figure1" style="display: block;"></a><div class="image-container " >
	
	<img src="/book/imgs/chapter01/ch01_01.png" alt="Nature of Code Image" />
	
	<p class="caption">Figure 1.1: A vector (drawn as an arrow) has magnitude (length of arrow) and direction (which way it is pointing).</p>
</div>
<p>In the above illustration, the vector is drawn as an arrow from point A to point B and serves as an instruction for how to travel from A to B.</p>
<section><a id="chapter01_section1" style="display: block;"></a><h3 id="11-vectors-you-complete-me">1.1 Vectors, You Complete Me</h3><p><a id="bouncing-ball-sketch-81ff0ee0-253f-0130-ba6f-7cd1c3f718ad" style="display: block;"></a><a id="vectorsbouncing-ball-sketch-82007b50-253f-0130-ba70-7cd1c3f718ad" style="display: block;"></a></p>
<p>Before we dive into more of the details about vectors, let’s look at a basic Processing example that demonstrates why we should care about vectors in the first place.  If you’ve read any of the introductory Processing textbooks or taken a class on programming with Processing (and hopefully you’ve done one of these things to help prepare you for this book), you probably, at one point or another, learned how to write a simple bouncing ball sketch.</p>
<div class="image-container screenshot" >
	
	<canvas data-processing-sources="/book/processingjs/chapter01/_1_1_bouncingball_novectors/_1_1_bouncingball_novectors.pde" class="screenshot">
		<p>Your browser does not support the canvas tag.</p>
	</canvas>
  <div class="sketch-controls">
    <button class="reset">RESET</button>
    <button class="pause">PAUSE</button>
  </div>
	
	<p class="caption">If you are reading this book as a PDF or in print, then you will only see screenshots of the code.  Motion, of course, is a key element of our discussion, so to the extent possible, the static screenshots will include trails to give a sense of the behavior. For more about how to draw trails, see the code examples available for download.</p>
</div>
<p><a id="chapter01_example1" style="display: block;"></a><span class="example">Example 1.1: Bouncing ball with no vectors</span></p>
<div class="source-code">
  <a class="toggle" href="#" data-to-raw='Show Raw' data-to-formatted='Show Formatted'>Show Raw</a>
  <textarea>//[full] Variables for location and speed of ball.
float x = 100;
float y = 100;
float xspeed = 1;
float yspeed = 3.3;
//[end]

//[full] Remember how Processing works?  setup() is executed once when the sketch starts and draw() loops forever and ever (until you quit).
void setup() {
  size(640,360);
  background(255);
}
//[end]

void draw() {
  background(255);

  //[full] Move the ball according to its speed.
  x = x + xspeed;
  y = y + yspeed;
  //[end]

  //[full] Check for bouncing.
  if ((x > width) || (x < 0)) {
    xspeed = xspeed * -1;
  }
  if ((y > height) || (y < 0)) {
    yspeed = yspeed * -1;
  }
  //[end]

  stroke(0);
  fill(175);
  // Display the ball at the location (x,y).
  ellipse(x,y,16,16);
}</textarea>
  
  
  
  <div class="code-block">

  <div class='code-comment-pair stretch'><div class='code-comment stretch'> Variables for location and speed of ball.</div><code><pre><span class='one-line'><span class="kt">float</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">100</span><span class="o">;</span></span>
<span class='one-line'><span class="kt">float</span> <span class="n">y</span> <span class="o">=</span> <span class="mi">100</span><span class="o">;</span></span>
<span class='one-line'><span class="kt">float</span> <span class="n">xspeed</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span></span>
<span class='one-line'><span class="kt">float</span> <span class="n">yspeed</span> <span class="o">=</span> <span class="mf">3.3</span><span class="o">;</span></span></pre></code><div style='position:relative;clear:both;display:block;height:1px;width:100%;'></div></div>

  <div class='code-comment-pair no-comment'><code><pre><span class='one-line'> </span></pre></code></div>

  <div class='code-comment-pair stretch'><div class='code-comment stretch'> Remember how Processing works?  setup() is executed once when the sketch starts and draw() loops forever and ever (until you quit).</div><code><pre><span class='one-line'><span class="kt">void</span> <span class="nf">setup</span><span class="o">()</span> <span class="o">{</span></span>
<span class='one-line'>  <span class="n">size</span><span class="o">(</span><span class="mi">640</span><span class="o">,</span><span class="mi">360</span><span class="o">);</span></span>
<span class='one-line'>  <span class="n">background</span><span class="o">(</span><span class="mi">255</span><span class="o">);</span></span>
<span class='one-line'><span class="o">}</span></span></pre></code><div style='position:relative;clear:both;display:block;height:1px;width:100%;'></div></div>

  <div class='code-comment-pair no-comment'><code><pre><span class='one-line'> </span>
<span class='one-line'><span class="kt">void</span> <span class="nf">draw</span><span class="o">()</span> <span class="o">{</span></span>
<span class='one-line'>  <span class="n">background</span><span class="o">(</span><span class="mi">255</span><span class="o">);</span></span>
<span class='one-line'> </span></pre></code></div>

  <div class='code-comment-pair stretch'><div class='code-comment stretch'> Move the ball according to its speed.</div><code><pre><span class='one-line'>  <span class="n">x</span> <span class="o">=</span> <span class="n">x</span> <span class="o">+</span> <span class="n">xspeed</span><span class="o">;</span></span>
<span class='one-line'>  <span class="n">y</span> <span class="o">=</span> <span class="n">y</span> <span class="o">+</span> <span class="n">yspeed</span><span class="o">;</span></span></pre></code><div style='position:relative;clear:both;display:block;height:1px;width:100%;'></div></div>

  <div class='code-comment-pair no-comment'><code><pre><span class='one-line'> </span></pre></code></div>

  <div class='code-comment-pair stretch'><div class='code-comment stretch'> Check for bouncing.</div><code><pre><span class='one-line'>  <span class="k">if</span> <span class="o">((</span><span class="n">x</span> <span class="o">&gt;</span> <span class="n">width</span><span class="o">)</span> <span class="o">||</span> <span class="o">(</span><span class="n">x</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="o">))</span> <span class="o">{</span></span>
<span class='one-line'>    <span class="n">xspeed</span> <span class="o">=</span> <span class="n">xspeed</span> <span class="o">*</span> <span class="o">-</span><span class="mi">1</span><span class="o">;</span></span>
<span class='one-line'>  <span class="o">}</span></span>
<span class='one-line'>  <span class="k">if</span> <span class="o">((</span><span class="n">y</span> <span class="o">&gt;</span> <span class="n">height</span><span class="o">)</span> <span class="o">||</span> <span class="o">(</span><span class="n">y</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="o">))</span> <span class="o">{</span></span>
<span class='one-line'>    <span class="n">yspeed</span> <span class="o">=</span> <span class="n">yspeed</span> <span class="o">*</span> <span class="o">-</span><span class="mi">1</span><span class="o">;</span></span>
<span class='one-line'>  <span class="o">}</span></span></pre></code><div style='position:relative;clear:both;display:block;height:1px;width:100%;'></div></div>

  <div class='code-comment-pair no-comment'><code><pre><span class='one-line'> </span>
<span class='one-line'>  <span class="n">stroke</span><span class="o">(</span><span class="mi">0</span><span class="o">);</span></span>
<span class='one-line'>  <span class="n">fill</span><span class="o">(</span><span class="mi">175</span><span class="o">);</span></span></pre></code></div>

  <div class='code-comment-pair '><div class='code-comment '>Display the ball at the location (x,y).</div><code><pre><span class='one-line'>  <span class="n">ellipse</span><span class="o">(</span><span class="n">x</span><span class="o">,</span><span class="n">y</span><span class="o">,</span><span class="mi">16</span><span class="o">,</span><span class="mi">16</span><span class="o">);</span></span>
<span class='one-line'><span class="o">}</span></span></pre></code></div>

</div>
  <div style="position: relative;clear:both;display:block;height:1px;width:100%;"></div>
</div><p>In the above example, we have a very simple world—a blank canvas with a circular shape (a “ball”) traveling around.  This ball has some properties, which are represented in the code as variables.</p>
<div class="note">
  <div class="list">
	
	<dl >
		
			<dt>
Location
</dt>
			<dd><p><em>x and y</em></p>
</dd>
		
			<dt>
Speed
</dt>
			<dd><p><em>xspeed and yspeed</em></p>
</dd>
		
	</dl>
</div>
</div><p>In a more advanced sketch, we could imagine having many more variables:</p>
<div class="note">
  <div class="list">
	
	<dl >
		
			<dt>
Acceleration
</dt>
			<dd><p><em>xacceleration and yacceleration</em></p>
</dd>
		
			<dt>
Target location
</dt>
			<dd><p><em>xtarget and ytarget</em></p>
</dd>
		
			<dt>
Wind
</dt>
			<dd><p><em>xwind and ywind</em></p>
</dd>
		
			<dt>
Friction
</dt>
			<dd><p><em>xfriction and yfriction</em></p>
</dd>
		
	</dl>
</div>
</div><p>It’s becoming clearer that for every concept in this world (wind, location, acceleration, etc.), we’ll need two variables.  And this is only a two-dimensional world. In a 3D world, we’ll need <span class="var">x</span>, <span class="var">y</span>, <span class="var">z</span>, <span class="var">xspeed</span>, <span class="var">yspeed</span>, <span class="var">zspeed</span>, and so on.</p>
<p>Wouldn’t it be nice if we could simplify our code and use fewer variables?</p>
<p>Instead of:</p>
<div class="source-code">
  <a class="toggle" href="#" data-to-raw='Show Raw' data-to-formatted='Show Formatted'>Show Raw</a>
  <textarea>float x;
float y;
float xspeed;
float yspeed;</textarea>
  
  
  
  <div class="code-block">

  <div class='code-comment-pair no-comment'><code><pre><span class='one-line'><span class="kt">float</span> <span class="n">x</span><span class="o">;</span></span>
<span class='one-line'><span class="kt">float</span> <span class="n">y</span><span class="o">;</span></span>
<span class='one-line'><span class="kt">float</span> <span class="n">xspeed</span><span class="o">;</span></span>
<span class='one-line'><span class="kt">float</span> <span class="n">yspeed</span><span class="o">;</span></span></pre></code></div>

</div>
  <div style="position: relative;clear:both;display:block;height:1px;width:100%;"></div>
</div><p>We could simply have…</p>
<div class="source-code">
  <a class="toggle" href="#" data-to-raw='Show Raw' data-to-formatted='Show Formatted'>Show Raw</a>
  <textarea>Vector location;
Vector speed;</textarea>
  
  
  
  <div class="code-block">

  <div class='code-comment-pair no-comment'><code><pre><span class='one-line'><span class="n">Vector</span> <span class="n">location</span><span class="o">;</span></span>
<span class='one-line'><span class="n">Vector</span> <span class="n">speed</span><span class="o">;</span></span></pre></code></div>

</div>
  <div style="position: relative;clear:both;display:block;height:1px;width:100%;"></div>
</div><p>Taking this first step in using vectors won’t allow us to do anything new.  Just adding vectors won’t magically make your Processing sketches simulate physics. However, they will simplify your code and provide a set of functions for common mathematical operations that happen over and over and over again while programming motion.</p>
<p>As an introduction to vectors, we’re going to live in two dimensions for quite some time (at least until we get through the first several chapters).  All of these examples can be fairly easily extended to three dimensions (and the class we will use—<span class="klass">PVector</span>—allows for three dimensions.)  However, it’s easier to start with just two.</p>
</section><section><a id="chapter01_section2" style="display: block;"></a><h3 id="12-vectors-for-processing-programmers">1.2 Vectors for Processing Programmers</h3><p><a id="processingvectors-and-820140a0-253f-0130-ba71-7cd1c3f718ad" style="display: block;"></a><a id="pvector-class-processing-82015130-253f-0130-ba72-7cd1c3f718ad" style="display: block;"></a><a id="vectorsprocessing-and-82016070-253f-0130-ba73-7cd1c3f718ad" style="display: block;"></a></p>
<p>One way to think of a vector is the difference between two points.   Consider how you might go about providing instructions to walk from one point to another.</p>
<p>Here are some vectors and possible translations:</p>
<a id="chapter01_figure2" style="display: block;"></a><div class="image-container " >
	
	<img src="/book/imgs/chapter01/ch01_02.png" alt="Nature of Code Image" />
	
	<p class="caption">Figure 1.2</p>
</div>
<div class="note">
  <div class="list">
	
	<dl >
		
			<dt>
(-15, 3)
</dt>
			<dd><p><em>Walk fifteen steps west; turn and walk three steps north.</em></p>
</dd>
		
			<dt>
(3, 4)
</dt>
			<dd><p><em>Walk three steps east; turn and walk five steps north.</em></p>
</dd>
		
			<dt>
(2, -1)
</dt>
			<dd><p><em>Walk two steps east; turn and walk one step south.</em></p>
</dd>
		
	</dl>
</div>
</div><p>You’ve probably done this before when programming motion.  For every frame of animation (i.e.  a single cycle through Processing’s <span class="function">draw()</span> loop), you instruct each object on the screen to move a certain number of pixels horizontally and a certain number of pixels vertically.</p>
<a id="chapter01_figure3" style="display: block;"></a><div class="image-container " >
	
	<img src="/book/imgs/chapter01/ch01_03.png" alt="Nature of Code Image" />
	
	<p class="caption">Figure 1.3</p>
</div>
<p>For every frame:</p>
<p><strong><em>new location = velocity applied to current location</em></strong></p>
<p><a id="locationsas-vectors-8201bd30-253f-0130-ba74-7cd1c3f718ad" style="display: block;"></a><a id="vectorslocations-and-8201ced0-253f-0130-ba75-7cd1c3f718ad" style="display: block;"></a><a id="vectorsvelocity-and-8201e1e0-253f-0130-ba76-7cd1c3f718ad" style="display: block;"></a><a id="velocityas-vector-8201f320-253f-0130-ba77-7cd1c3f718ad" style="display: block;"></a></p>
<p>If velocity is a vector (the difference between two points), what is location?   Is it a vector too?  Technically, one might argue that location is not a vector, since it’s not describing how to move from one point to another—it’s simply describing a singular point in space.</p>
<p>Nevertheless, another way to describe a location is the path taken from the origin to reach that location. Hence, a location can be the vector representing the difference between location and origin.</p>
<a id="chapter01_figure4" style="display: block;"></a><div class="image-container " >
	
	<img src="/book/imgs/chapter01/ch01_04.png" alt="Nature of Code Image" />
	
	<p class="caption">Figure 1.4</p>
</div>
<p>Let’s examine the underlying data for both location and velocity.  In the bouncing ball example, we had the following:</p>
<div class="note">
  <div class="list">
	
	<dl >
		
			<dt>
location
</dt>
			<dd><p><em>x,y</em></p>
</dd>
		
			<dt>
velocity
</dt>
			<dd><p><em>xspeed,yspeed</em></p>
</dd>
		
	</dl>
</div>
</div><p>Notice how we are storing the same data for both—two floating point numbers, an <span class="var">x</span> and a <span class="var">y</span>. If we were to write a vector class ourselves, we’d start with something rather basic:</p>
<div class="source-code">
  <a class="toggle" href="#" data-to-raw='Show Raw' data-to-formatted='Show Formatted'>Show Raw</a>
  <textarea>class PVector {

  float x;
  float y;

  PVector(float x_, float y_) {
    x = x_;
    y = y_;
  }

}</textarea>
  
  
  
  <div class="code-block">

  <div class='code-comment-pair no-comment'><code><pre><span class='one-line'><span class="kd">class</span> <span class="nc">PVector</span> <span class="o">{</span></span>
<span class='one-line'> </span>
<span class='one-line'>  <span class="kt">float</span> <span class="n">x</span><span class="o">;</span></span>
<span class='one-line'>  <span class="kt">float</span> <span class="n">y</span><span class="o">;</span></span>
<span class='one-line'> </span>
<span class='one-line'>  <span class="n">PVector</span><span class="o">(</span><span class="kt">float</span> <span class="n">x_</span><span class="o">,</span> <span class="kt">float</span> <span class="n">y_</span><span class="o">)</span> <span class="o">{</span></span>
<span class='one-line'>    <span class="n">x</span> <span class="o">=</span> <span class="n">x_</span><span class="o">;</span></span>
<span class='one-line'>    <span class="n">y</span> <span class="o">=</span> <span class="n">y_</span><span class="o">;</span></span>
<span class='one-line'>  <span class="o">}</span></span>
<span class='one-line'> </span>
<span class='one-line'><span class="o">}</span></span></pre></code></div>

</div>
  <div style="position: relative;clear:both;display:block;height:1px;width:100%;"></div>
</div><p>At its core, a <span class="klass">PVector</span> is just a convenient way to store two values (or three, as we’ll see in 3D examples).</p>
<p>And so this …</p>
<div class="source-code">
  <a class="toggle" href="#" data-to-raw='Show Raw' data-to-formatted='Show Formatted'>Show Raw</a>
  <textarea>float x = 100;
float y = 100;
float xspeed = 1;
float yspeed = 3.3;</textarea>
  
  
  
  <div class="code-block">

  <div class='code-comment-pair no-comment'><code><pre><span class='one-line'><span class="kt">float</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">100</span><span class="o">;</span></span>
<span class='one-line'><span class="kt">float</span> <span class="n">y</span> <span class="o">=</span> <span class="mi">100</span><span class="o">;</span></span>
<span class='one-line'><span class="kt">float</span> <span class="n">xspeed</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span></span>
<span class='one-line'><span class="kt">float</span> <span class="n">yspeed</span> <span class="o">=</span> <span class="mf">3.3</span><span class="o">;</span></span></pre></code></div>

</div>
  <div style="position: relative;clear:both;display:block;height:1px;width:100%;"></div>
</div><p>becomes …</p>
<div class="source-code">
  <a class="toggle" href="#" data-to-raw='Show Raw' data-to-formatted='Show Formatted'>Show Raw</a>
  <textarea>PVector location = new PVector(100,100);
PVector velocity = new PVector(1,3.3);</textarea>
  
  
  
  <div class="code-block">

  <div class='code-comment-pair no-comment'><code><pre><span class='one-line'><span class="n">PVector</span> <span class="n">location</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PVector</span><span class="o">(</span><span class="mi">100</span><span class="o">,</span><span class="mi">100</span><span class="o">);</span></span>
<span class='one-line'><span class="n">PVector</span> <span class="n">velocity</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PVector</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="mf">3.3</span><span class="o">);</span></span></pre></code></div>

</div>
  <div style="position: relative;clear:both;display:block;height:1px;width:100%;"></div>
</div><p><a id="vectorsmotion-implementing-with-82026bb0-253f-0130-ba78-7cd1c3f718ad" style="display: block;"></a></p>
<p>Now that we have two vector objects (location and velocity), we’re ready to implement the algorithm for motion—<strong><em>location = location + velocity</em></strong>.   In Example 1.1, without vectors, we had:</p>
<div class="source-code">
  <a class="toggle" href="#" data-to-raw='Show Raw' data-to-formatted='Show Formatted'>Show Raw</a>
  <textarea>//[full] Add each speed to each location.
x = x + xspeed;
y = y + yspeed;
//[end]</textarea>
  
  
  
  <div class="code-block">

  <div class='code-comment-pair stretch'><div class='code-comment stretch'> Add each speed to each location.</div><code><pre><span class='one-line'><span class="n">x</span> <span class="o">=</span> <span class="n">x</span> <span class="o">+</span> <span class="n">xspeed</span><span class="o">;</span></span>
<span class='one-line'><span class="n">y</span> <span class="o">=</span> <span class="n">y</span> <span class="o">+</span> <span class="n">yspeed</span><span class="o">;</span></span></pre></code><div style='position:relative;clear:both;display:block;height:1px;width:100%;'></div></div>

  <div class='code-comment-pair no-comment'><code><pre></pre></code></div>

</div>
  <div style="position: relative;clear:both;display:block;height:1px;width:100%;"></div>
</div><p>In an ideal world, we would be able to rewrite the above as:</p>
<div class="source-code">
  <a class="toggle" href="#" data-to-raw='Show Raw' data-to-formatted='Show Formatted'>Show Raw</a>
  <textarea>// Add the velocity vector to the location vector.
location = location + velocity;</textarea>
  
  
  
  <div class="code-block">

  <div class='code-comment-pair '><div class='code-comment '>Add the velocity vector to the location vector.</div><code><pre><span class='one-line'><span class="n">location</span> <span class="o">=</span> <span class="n">location</span> <span class="o">+</span> <span class="n">velocity</span><span class="o">;</span></span></pre></code></div>

</div>
  <div style="position: relative;clear:both;display:block;height:1px;width:100%;"></div>
</div><p><a id="addition-operator-82029e30-253f-0130-ba79-7cd1c3f718ad" style="display: block;"></a></p>
<p>However, in Processing, the addition operator + is reserved for primitive values (integers, floats, etc.) only.  Processing doesn’t know how to add two <span class="klass">PVector</span> objects together any more than it knows how to add two <span class="klass">PFont</span> objects or <span class="klass">PImage</span> objects.   Fortunately for us, the <span class="klass">PVector</span> class includes functions for common mathematical operations.</p>
</section><section><a id="chapter01_section3" style="display: block;"></a><h3 id="13-vector-addition">1.3 Vector Addition</h3><p><a id="add-function-pvector-class-8202dc00-253f-0130-ba7a-7cd1c3f718ad" style="display: block;"></a><a id="vectorsadding-8202f110-253f-0130-ba7b-7cd1c3f718ad" style="display: block;"></a></p>
<p>Before we continue looking at the <span class="klass">PVector</span> class and its <span class="function">add()</span> method (purely for the sake of learning since it’s already implemented for us in Processing itself), let’s examine vector addition using the notation found in math and physics textbooks.</p>
<p><a id="scalar-notation-vs-vector-notation-82031a20-253f-0130-ba7c-7cd1c3f718ad" style="display: block;"></a><a id="vector-notation-vs-scalar-notation-82033360-253f-0130-ba7d-7cd1c3f718ad" style="display: block;"></a></p>
<p>Vectors are typically written either in boldface type or with an arrow on top.  For the purposes of this book, to distinguish a <strong><em>vector</em></strong> from a <strong><em>scalar</em></strong> (<em>scalar</em> refers to a single value, such as an integer or a floating point number), we’ll use the arrow notation:</p>
<div class="list">
	
	<ul>
		
			<li><p>
Vector: <math xmlns="http://www.w3.org/1998/Math/MathML"><mstyle displaystyle="true"><mover><mrow><mi>u</mi></mrow><mrow><mo>→</mo></mrow></mover></mstyle></math>
</p>
</li>
		
			<li><p>
Scalar: <math xmlns="http://www.w3.org/1998/Math/MathML"><mstyle displaystyle="true"><mi>x </mi></mstyle></math>
</p>
</li>
		
	</ul>
</div><p>Let’s say I have the following two vectors:</p>
<a id="chapter01_figure5" style="display: block;"></a><div class="image-container " >
	
	<img src="/book/imgs/chapter01/ch01_05.png" alt="Nature of Code Image" />
	
	<p class="caption">Figure 1.5</p>
</div>
<p>Each vector has two components, an <span class="var">x</span> and a <span class="var">y</span>.  To add two vectors together, we simply add both <span class="var">x</span>’s and both <span class="var">y</span>’s.</p>
<a id="chapter01_figure6" style="display: block;"></a><div class="image-container " >
	
	<img src="/book/imgs/chapter01/ch01_06.png" alt="Nature of Code Image" />
	
	<p class="caption">Figure 1.6</p>
</div>
<p>In other words:</p>
<p><math xmlns="http://www.w3.org/1998/Math/MathML"><mstyle displaystyle="true"><mover><mrow><mi>w </mi></mrow><mrow><mo>→</mo></mrow></mover><mo>= </mo><mover><mrow><mi>u </mi></mrow><mrow><mo>→</mo></mrow></mover><mo>+ </mo><mover><mrow><mi>v </mi></mrow><mrow><mo>→</mo></mrow></mover></mstyle></math></p>
<p>can be written as:</p>
<p><math xmlns="http://www.w3.org/1998/Math/MathML"><mstyle displaystyle="true"><msub><mrow><mi> w </mi></mrow><mrow><mi> x </mi></mrow></msub><mo> = </mo><msub><mrow><mi> u </mi></mrow><mrow><mi> x </mi></mrow></msub><mo> + </mo><msub><mrow><mi> v </mi></mrow><mrow><mi> x </mi></mrow></msub></mstyle></math><br />
<math xmlns="http://www.w3.org/1998/Math/MathML"><mstyle displaystyle="true"><msub><mrow><mi> w </mi></mrow><mrow><mi> y </mi></mrow></msub><mo> = </mo><msub><mrow><mi> u </mi></mrow><mrow><mi> y </mi></mrow></msub><mo> + </mo><msub><mrow><mi> v </mi></mrow><mrow><mi> y </mi></mrow></msub></mstyle></math></p>
<p>Then, replacing <span class="var">u</span> and <span class="var">v</span> with their values from Figure 1.6, we get:</p>
<p><math xmlns="http://www.w3.org/1998/Math/MathML"><mstyle displaystyle="true"><msub><mrow><mi> w </mi></mrow><mrow><mi> x </mi></mrow></msub><mo> = </mo><mn> 5 </mn><mo> + </mo><mn> 3 </mn></mstyle></math><br />
<math xmlns="http://www.w3.org/1998/Math/MathML"><mstyle displaystyle="true"><msub><mrow><mi> w </mi></mrow><mrow><mi> y </mi></mrow></msub><mo> = </mo><mn> 2 </mn><mo> + </mo><mn> 4 </mn></mstyle></math></p>
<p>which means that:</p>
<p><math xmlns="http://www.w3.org/1998/Math/MathML"><mstyle displaystyle="true"><msub><mrow><mi> w </mi></mrow><mrow><mi> x </mi></mrow></msub><mo> = </mo><mn> 8 </mn></mstyle></math>
<math xmlns="http://www.w3.org/1998/Math/MathML"><mstyle displaystyle="true"><msub><mrow><mi> w </mi></mrow><mrow><mi> y </mi></mrow></msub><mo> = </mo><mn> 6 </mn></mstyle></math></p>
<p>Finally, we write that as a vector:</p>
<p><math xmlns="http://www.w3.org/1998/Math/MathML"><mstyle displaystyle="true"><mover><mrow><mi> w </mi></mrow><mrow><mo> → </mo></mrow></mover><mo> = </mo><mfenced><mrow><mn> 8 </mn><mo> , </mo><mn> 6 </mn></mrow></mfenced></mstyle></math></p>
<p><a id="add-function-pvector-classimplementation-of-82054190-253f-0130-ba7e-7cd1c3f718ad" style="display: block;"></a></p>
<p>Now that we understand how to add two vectors together, we can look at how addition is implemented in the <span class="klass">PVector</span> class itself.  Let’s write a function called <span class="function">add()</span> that takes another <span class="klass">PVector</span> object as its argument.</p>
<div class="source-code">
  <a class="toggle" href="#" data-to-raw='Show Raw' data-to-formatted='Show Formatted'>Show Raw</a>
  <textarea>class PVector {

  float x;
  float y;

  PVector(float x_, float y_) {
    x = x_;
    y = y_;
  }

  //[full] New! A function to add another PVector to this PVector.  Simply add the <em>x</em> components and the <em>y</em> components together.
  void add(PVector v) { //[bold]
    y = y + v.y; //[bold]
    x = x + v.x; //[bold]
  } //[bold]
  //[end]
}</textarea>
  
  
  
  <div class="code-block">

  <div class='code-comment-pair no-comment'><code><pre><span class='one-line'><span class="kd">class</span> <span class="nc">PVector</span> <span class="o">{</span></span>
<span class='one-line'> </span>
<span class='one-line'>  <span class="kt">float</span> <span class="n">x</span><span class="o">;</span></span>
<span class='one-line'>  <span class="kt">float</span> <span class="n">y</span><span class="o">;</span></span>
<span class='one-line'> </span>
<span class='one-line'>  <span class="n">PVector</span><span class="o">(</span><span class="kt">float</span> <span class="n">x_</span><span class="o">,</span> <span class="kt">float</span> <span class="n">y_</span><span class="o">)</span> <span class="o">{</span></span>
<span class='one-line'>    <span class="n">x</span> <span class="o">=</span> <span class="n">x_</span><span class="o">;</span></span>
<span class='one-line'>    <span class="n">y</span> <span class="o">=</span> <span class="n">y_</span><span class="o">;</span></span>
<span class='one-line'>  <span class="o">}</span></span>
<span class='one-line'> </span></pre></code></div>

  <div class='code-comment-pair stretch'><div class='code-comment stretch'> New! A function to add another PVector to this PVector.  Simply add the <em>x</em> components and the <em>y</em> components together.</div><code><pre><span class='one-line'>  <strong><span class="kt">void</span> <span class="nf">add</span><span class="o">(</span><span class="n">PVector</span> <span class="n">v</span><span class="o">)</span> <span class="o">{</span></strong></span>
<span class='one-line'>    <strong><span class="n">y</span> <span class="o">=</span> <span class="n">y</span> <span class="o">+</span> <span class="n">v</span><span class="o">.</span><span class="na">y</span><span class="o">;</span></strong></span>
<span class='one-line'>    <strong><span class="n">x</span> <span class="o">=</span> <span class="n">x</span> <span class="o">+</span> <span class="n">v</span><span class="o">.</span><span class="na">x</span><span class="o">;</span></strong></span>
<span class='one-line'>  <strong><span class="o">}</span></strong></span></pre></code><div style='position:relative;clear:both;display:block;height:1px;width:100%;'></div></div>

  <div class='code-comment-pair no-comment'><code><pre><span class='one-line'><span class="o">}</span></span></pre></code></div>

</div>
  <div style="position: relative;clear:both;display:block;height:1px;width:100%;"></div>
</div><p><a id="bouncing-ball-sketchimplementing-with-vectors-820574d0-253f-0130-ba7f-7cd1c3f718ad" style="display: block;"></a></p>
<p>Now that we see how <span class="function">add()</span> is written inside of <span class="klass">PVector</span>, we can return to our bouncing ball example with its <strong><em>location + velocity</em></strong> algorithm and implement vector addition:</p>
<div class="source-code">
  <a class="toggle" href="#" data-to-raw='Show Raw' data-to-formatted='Show Formatted'>Show Raw</a>
  <textarea>// Add the current velocity to the location.
location = location + velocity; //[line-through]
location.add(velocity);</textarea>
  
  
  
  <div class="code-block">

  <div class='code-comment-pair '><div class='code-comment '>Add the current velocity to the location.</div><code><pre><span class='one-line'><span class="line-through"><span class="n">location</span> <span class="o">=</span> <span class="n">location</span> <span class="o">+</span> <span class="n">velocity</span><span class="o">;</span></span></span>
<span class='one-line'><span class="n">location</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">velocity</span><span class="o">);</span></span></pre></code></div>

</div>
  <div style="position: relative;clear:both;display:block;height:1px;width:100%;"></div>
</div><p>And here we are, ready to rewrite the bouncing ball example using <span class="klass">PVector</span>.</p>
<p><a id="dot-syntax-8205b130-253f-0130-ba80-7cd1c3f718ad" style="display: block;"></a><a id="object-oriented-programmingdot-syntax-8205c230-253f-0130-ba81-7cd1c3f718ad" style="display: block;"></a></p>
<p><a id="chapter01_example2" style="display: block;"></a><span class="example">Example 1.2: Bouncing ball with PVectors!</span></p>
<div class="source-code">
  <a class="toggle" href="#" data-to-raw='Show Raw' data-to-formatted='Show Formatted'>Show Raw</a>
  <textarea>//[full] Instead of a bunch of floats, we now just have two PVector variables.
PVector location; //[bold]
PVector velocity; //[bold]
//[end]

void setup() {
  size(640,360);
  location = new PVector(100,100); //[bold]
  velocity = new PVector(2.5,5); //[bold]
}

void draw() {
  background(255);

  location.add(velocity); //[bold]
  //[full] We still sometimes need to refer to the individual components of a PVector and can do so using the dot syntax: location.x, velocity.y, etc.
  if ((location.x > width) || (location.x < 0)) { //[bold]
    velocity.x = velocity.x * -1; //[bold]
  } //[bold]
  if ((location.y > height) || (location.y < 0)) { //[bold]
    velocity.y = velocity.y * -1; //[bold]
  } //[bold]
  //[end]

  stroke(0);
  fill(175);
  ellipse(location.x,location.y,16,16); //[bold]
}</textarea>
  
  
  
  <div class="code-block">

  <div class='code-comment-pair stretch'><div class='code-comment stretch'> Instead of a bunch of floats, we now just have two PVector variables.</div><code><pre><span class='one-line'><strong><span class="n">PVector</span> <span class="n">location</span><span class="o">;</span></strong></span>
<span class='one-line'><strong><span class="n">PVector</span> <span class="n">velocity</span><span class="o">;</span></strong></span></pre></code><div style='position:relative;clear:both;display:block;height:1px;width:100%;'></div></div>

  <div class='code-comment-pair no-comment'><code><pre><span class='one-line'> </span>
<span class='one-line'><span class="kt">void</span> <span class="nf">setup</span><span class="o">()</span> <span class="o">{</span></span>
<span class='one-line'>  <span class="n">size</span><span class="o">(</span><span class="mi">640</span><span class="o">,</span><span class="mi">360</span><span class="o">);</span></span>
<span class='one-line'>  <strong><span class="n">location</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PVector</span><span class="o">(</span><span class="mi">100</span><span class="o">,</span><span class="mi">100</span><span class="o">);</span></strong></span>
<span class='one-line'>  <strong><span class="n">velocity</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PVector</span><span class="o">(</span><span class="mf">2.5</span><span class="o">,</span><span class="mi">5</span><span class="o">);</span></strong></span>
<span class='one-line'><span class="o">}</span></span>
<span class='one-line'> </span>
<span class='one-line'><span class="kt">void</span> <span class="nf">draw</span><span class="o">()</span> <span class="o">{</span></span>
<span class='one-line'>  <span class="n">background</span><span class="o">(</span><span class="mi">255</span><span class="o">);</span></span>
<span class='one-line'> </span>
<span class='one-line'>  <strong><span class="n">location</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">velocity</span><span class="o">);</span></strong></span></pre></code></div>

  <div class='code-comment-pair stretch'><div class='code-comment stretch'> We still sometimes need to refer to the individual components of a PVector and can do so using the dot syntax: location.x, velocity.y, etc.</div><code><pre><span class='one-line'>  <strong><span class="k">if</span> <span class="o">((</span><span class="n">location</span><span class="o">.</span><span class="na">x</span> <span class="o">&gt;</span> <span class="n">width</span><span class="o">)</span> <span class="o">||</span> <span class="o">(</span><span class="n">location</span><span class="o">.</span><span class="na">x</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="o">))</span> <span class="o">{</span></strong></span>
<span class='one-line'>    <strong><span class="n">velocity</span><span class="o">.</span><span class="na">x</span> <span class="o">=</span> <span class="n">velocity</span><span class="o">.</span><span class="na">x</span> <span class="o">*</span> <span class="o">-</span><span class="mi">1</span><span class="o">;</span></strong></span>
<span class='one-line'>  <strong><span class="o">}</span></strong></span>
<span class='one-line'>  <strong><span class="k">if</span> <span class="o">((</span><span class="n">location</span><span class="o">.</span><span class="na">y</span> <span class="o">&gt;</span> <span class="n">height</span><span class="o">)</span> <span class="o">||</span> <span class="o">(</span><span class="n">location</span><span class="o">.</span><span class="na">y</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="o">))</span> <span class="o">{</span></strong></span>
<span class='one-line'>    <strong><span class="n">velocity</span><span class="o">.</span><span class="na">y</span> <span class="o">=</span> <span class="n">velocity</span><span class="o">.</span><span class="na">y</span> <span class="o">*</span> <span class="o">-</span><span class="mi">1</span><span class="o">;</span></strong></span>
<span class='one-line'>  <strong><span class="o">}</span></strong></span></pre></code><div style='position:relative;clear:both;display:block;height:1px;width:100%;'></div></div>

  <div class='code-comment-pair no-comment'><code><pre><span class='one-line'> </span>
<span class='one-line'>  <span class="n">stroke</span><span class="o">(</span><span class="mi">0</span><span class="o">);</span></span>
<span class='one-line'>  <span class="n">fill</span><span class="o">(</span><span class="mi">175</span><span class="o">);</span></span>
<span class='one-line'>  <strong><span class="n">ellipse</span><span class="o">(</span><span class="n">location</span><span class="o">.</span><span class="na">x</span><span class="o">,</span><span class="n">location</span><span class="o">.</span><span class="na">y</span><span class="o">,</span><span class="mi">16</span><span class="o">,</span><span class="mi">16</span><span class="o">);</span></strong></span>
<span class='one-line'><span class="o">}</span></span></pre></code></div>

</div>
  <div style="position: relative;clear:both;display:block;height:1px;width:100%;"></div>
</div><p>Now, you might feel somewhat disappointed.  After all, this may initially appear to have made the code more complicated than the original version.  While this is a perfectly reasonable and valid critique, it’s important to understand that we haven’t fully realized the power of programming with vectors just yet.   Looking at a simple bouncing ball and only implementing vector addition is just the first step.  As we move forward into a more complex world of multiple objects and multiple <strong><em>forces</em></strong> (which we’ll introduce in Chapter 2), the benefits of <span class="klass">PVector</span> will become more apparent.</p>
<p>We should, however, note an important aspect of the above transition to programming with vectors.  Even though we are using <span class="klass">PVector</span> objects to describe two values—the <span class="var">x</span> and <span class="var">y</span> of location and the <span class="var">x</span> and <span class="var">y</span> of velocity—we still often need to refer to the <em>x</em> and <em>y</em> components of each <span class="klass">PVector</span> individually.  When we go to draw an object in Processing, there’s no means for us to say:</p>
<div class="source-code">
  <a class="toggle" href="#" data-to-raw='Show Raw' data-to-formatted='Show Formatted'>Show Raw</a>
  <textarea>ellipse(location,16,16); //[line-through]</textarea>
  
  
  
  <div class="code-block">

  <div class='code-comment-pair no-comment'><code><pre><span class='one-line'><span class="line-through"><span class="n">ellipse</span><span class="o">(</span><span class="n">location</span><span class="o">,</span><span class="mi">16</span><span class="o">,</span><span class="mi">16</span><span class="o">);</span></span></span></pre></code></div>

</div>
  <div style="position: relative;clear:both;display:block;height:1px;width:100%;"></div>
</div><p>The <span class="function">ellipse()</span> function does not allow for a <span class="klass">PVector</span> as an argument.  An ellipse can only be drawn with two scalar values, an <span class="var">x</span>-coordinate and a <span class="var">y</span>-coordinate.  And so we must dig into the <span class="klass">PVector</span> object and pull out the <em>x</em> and <em>y</em> components using object-oriented dot syntax.</p>
<div class="source-code">
  <a class="toggle" href="#" data-to-raw='Show Raw' data-to-formatted='Show Formatted'>Show Raw</a>
  <textarea>ellipse(location.x,location.y,16,16);</textarea>
  
  
  
  <div class="code-block">

  <div class='code-comment-pair no-comment'><code><pre><span class='one-line'><span class="n">ellipse</span><span class="o">(</span><span class="n">location</span><span class="o">.</span><span class="na">x</span><span class="o">,</span><span class="n">location</span><span class="o">.</span><span class="na">y</span><span class="o">,</span><span class="mi">16</span><span class="o">,</span><span class="mi">16</span><span class="o">);</span></span></pre></code></div>

</div>
  <div style="position: relative;clear:both;display:block;height:1px;width:100%;"></div>
</div><p>The same issue arises when testing if the circle has reached the edge of the window, and we need to access the individual components of both vectors: <span class="var">location</span> and <span class="var">velocity</span>.</p>
<div class="source-code">
  <a class="toggle" href="#" data-to-raw='Show Raw' data-to-formatted='Show Formatted'>Show Raw</a>
  <textarea>if ((location.x > width) || (location.x < 0)) {
  velocity.x = velocity.x * -1;
}</textarea>
  
  
  
  <div class="code-block">

  <div class='code-comment-pair no-comment'><code><pre><span class='one-line'><span class="k">if</span> <span class="o">((</span><span class="n">location</span><span class="o">.</span><span class="na">x</span> <span class="o">&gt;</span> <span class="n">width</span><span class="o">)</span> <span class="o">||</span> <span class="o">(</span><span class="n">location</span><span class="o">.</span><span class="na">x</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="o">))</span> <span class="o">{</span></span>
<span class='one-line'>  <span class="n">velocity</span><span class="o">.</span><span class="na">x</span> <span class="o">=</span> <span class="n">velocity</span><span class="o">.</span><span class="na">x</span> <span class="o">*</span> <span class="o">-</span><span class="mi">1</span><span class="o">;</span></span>
<span class='one-line'><span class="o">}</span></span></pre></code></div>

</div>
  <div style="position: relative;clear:both;display:block;height:1px;width:100%;"></div>
</div><div class="example">
  <a id="chapter01_exercise1" style="display: block;"></a><h4 id="exercise-11">Exercise 1.1</h4><p>Find something you’ve previously made in Processing using separate <span class="var">x</span> and <span class="var">y</span> variables and use <span class="klass">PVector</span>s instead.</p>

</div><div class="example">
  <a id="chapter01_exercise2" style="display: block;"></a><h4 id="exercise-12">Exercise 1.2</h4><p>Take one of the walker examples from the introduction and convert it to use <span class="klass">PVector</span>s.</p>

</div><div class="example">
  <a id="chapter01_exercise3" style="display: block;"></a><h4 id="exercise-13">Exercise 1.3</h4><p>Extend the bouncing ball with vectors example into 3D.  Can you get a sphere to bounce around a box?</p>

</div></section><section><a id="chapter01_section4" style="display: block;"></a><h3 id="14-more-vector-math">1.4 More Vector Math</h3><p>Addition was really just the first step.   There are many mathematical operations that are commonly used with vectors.   Below is a comprehensive list of the operations available as functions in the <span class="klass">PVector</span> class.  We’ll go through a few of the key ones now.  As our examples get more sophisticated in later chapters, we’ll continue to reveal the details of more functions.</p>
<p><a id="pvector-class-processingmathematical-functions-for-8206d6f0-253f-0130-ba82-7cd1c3f718ad" style="display: block;"></a><a id="anglebetween-function-pvector-class-8206ef20-253f-0130-ba83-7cd1c3f718ad" style="display: block;"></a><a id="cross-function-pvector-class-8206fee0-253f-0130-ba84-7cd1c3f718ad" style="display: block;"></a><a id="dist-function-pvector-class-82071120-253f-0130-ba85-7cd1c3f718ad" style="display: block;"></a><a id="dot-function-pvector-class-82072000-253f-0130-ba86-7cd1c3f718ad" style="display: block;"></a><a id="heading-function-pvector-class-82072ee0-253f-0130-ba87-7cd1c3f718ad" style="display: block;"></a><a id="lerp-function-pvector-class-82073db0-253f-0130-ba88-7cd1c3f718ad" style="display: block;"></a><a id="limit-function-pvector-class-82074c20-253f-0130-ba89-7cd1c3f718ad" style="display: block;"></a><a id="pvector-class-processingfunction-list-for-82075c90-253f-0130-ba8a-7cd1c3f718ad" style="display: block;"></a><a id="random2d-function-pvector-class-82077030-253f-0130-ba8b-7cd1c3f718ad" style="display: block;"></a><a id="random3d-function-pvector-class-82078820-253f-0130-ba8c-7cd1c3f718ad" style="display: block;"></a><a id="rotate-function-pvector-class-820799e0-253f-0130-ba8d-7cd1c3f718ad" style="display: block;"></a></p>
<div class="list">
	
	<ul>
		
			<li><p><span class="function">add()</span> — add vectors
</p>
</li>
		
			<li><p><span class="function">sub()</span> — subtract vectors
</p>
</li>
		
			<li><p><span class="function">mult()</span> — scale the vector with multiplication
</p>
</li>
		
			<li><p><span class="function">div()</span> — scale the vector with division
</p>
</li>
		
			<li><p><span class="function">mag()</span> — calculate the magnitude of a vector
</p>
</li>
		
			<li><p><span class="function">setMag()</span> - set the magnitude of a vector
</p>
</li>
		
			<li><p><span class="function">normalize()</span> — normalize the vector to a unit length of 1
</p>
</li>
		
			<li><p><span class="function">limit()</span> — limit the magnitude of a vector
</p>
</li>
		
			<li><p><span class="function">heading()</span> — the 2D heading of a vector expressed as an angle
</p>
</li>
		
			<li><p><span class="function">rotate()</span> — rotate a 2D vector by an angle
</p>
</li>
		
			<li><p><span class="function">lerp()</span> — linear interpolate to another vector
</p>
</li>
		
			<li><p><span class="function">dist()</span> — the Euclidean distance between two vectors (considered as points)
</p>
</li>
		
			<li><p><span class="function">angleBetween()</span> — find the angle between two vectors
</p>
</li>
		
			<li><p><span class="function">dot()</span> — the dot product of two vectors
</p>
</li>
		
			<li><p><span class="function">cross()</span> — the cross product of two vectors (only relevant in three dimensions)
</p>
</li>
		
			<li><p><span class="function">random2D()</span> - make a random 2D vector
</p>
</li>
		
			<li><p><span class="function">random3D()</span> - make a random 3D vector
</p>
</li>
		
	</ul>
</div><p>Having already covered addition, let’s start with subtraction.  This one’s not so bad; just take the plus sign and replace it with a minus!</p>
<section><a id="_vector_subtraction" style="display: block;"></a><h4 id="vector-subtraction">Vector subtraction</h4><p><a id="pvector-class-processingsub-function-8209f130-253f-0130-ba8e-7cd1c3f718ad" style="display: block;"></a><a id="sub-function-pvector-class-820a0280-253f-0130-ba8f-7cd1c3f718ad" style="display: block;"></a></p>
<p><math xmlns="http://www.w3.org/1998/Math/MathML"><mstyle displaystyle="true"><mover><mrow><mi>w </mi></mrow><mrow><mo>→</mo></mrow></mover><mo>= </mo><mover><mrow><mi>u </mi></mrow><mrow><mo>→</mo></mrow></mover><mo>- </mo><mover><mrow><mi>v </mi></mrow><mrow><mo>→</mo></mrow></mover></mstyle></math></p>
<p>can be written as:</p>
<p><math xmlns="http://www.w3.org/1998/Math/MathML"><mstyle displaystyle="true"><msub><mrow><mi> w </mi></mrow><mrow><mi> x </mi></mrow></msub><mo> = </mo><msub><mrow><mi> u </mi></mrow><mrow><mi> x </mi></mrow></msub><mo> - </mo><msub><mrow><mi> v </mi></mrow><mrow><mi> x </mi></mrow></msub></mstyle></math><br />
<math xmlns="http://www.w3.org/1998/Math/MathML"><mstyle displaystyle="true"><msub><mrow><mi> w </mi></mrow><mrow><mi> y </mi></mrow></msub><mo> = </mo><msub><mrow><mi> u </mi></mrow><mrow><mi> y </mi></mrow></msub><mo> - </mo><msub><mrow><mi> v </mi></mrow><mrow><mi> y </mi></mrow></msub></mstyle></math></p>
<a id="chapter01_figure7" style="display: block;"></a><div class="image-container " >
	
	<img src="/book/imgs/chapter01/ch01_07.png" alt="Nature of Code Image" />
	
	<p class="caption">Figure 1.7: Vector Subtraction</p>
</div>
<p>and so the function inside <span class="klass">PVector</span> looks like:</p>
<div class="source-code">
  <a class="toggle" href="#" data-to-raw='Show Raw' data-to-formatted='Show Formatted'>Show Raw</a>
  <textarea>  void sub(PVector v) {
    x = x - v.x;
    y = y - v.y;
  }</textarea>
  
  
  
  <div class="code-block">

  <div class='code-comment-pair no-comment'><code><pre><span class='one-line'>  <span class="kt">void</span> <span class="nf">sub</span><span class="o">(</span><span class="n">PVector</span> <span class="n">v</span><span class="o">)</span> <span class="o">{</span></span>
<span class='one-line'>    <span class="n">x</span> <span class="o">=</span> <span class="n">x</span> <span class="o">-</span> <span class="n">v</span><span class="o">.</span><span class="na">x</span><span class="o">;</span></span>
<span class='one-line'>    <span class="n">y</span> <span class="o">=</span> <span class="n">y</span> <span class="o">-</span> <span class="n">v</span><span class="o">.</span><span class="na">y</span><span class="o">;</span></span>
<span class='one-line'>  <span class="o">}</span></span></pre></code></div>

</div>
  <div style="position: relative;clear:both;display:block;height:1px;width:100%;"></div>
</div><p>The following example demonstrates vector subtraction by taking the difference between two points—the mouse location and the center of the window.</p>
<div class="image-container screenshot" >
	
	<canvas data-processing-sources="/book/processingjs/chapter01/_1_3_vector_subtraction/_1_3_vector_subtraction.pde" class="screenshot">
		<p>Your browser does not support the canvas tag.</p>
	</canvas>
  <div class="sketch-controls">
    <button class="reset">RESET</button>
    <button class="pause">PAUSE</button>
  </div>
	
	
</div>
<p><a id="chapter01_example3" style="display: block;"></a><span class="example">Example 1.3: Vector subtraction</span></p>
<div class="source-code">
  <a class="toggle" href="#" data-to-raw='Show Raw' data-to-formatted='Show Formatted'>Show Raw</a>
  <textarea>void setup() {
  size(640,360);
}

void draw() {
  background(255);
  //[full] Two PVectors, one for the mouse location and one for the center of the window
  PVector mouse  = new PVector(mouseX,mouseY);
  PVector center = new PVector(width/2,height/2);
  //[end]
  // PVector subtraction!
  mouse.sub(center);
    // Draw a line to represent the vector.
  translate(width/2,height/2);
  line(0,0,mouse.x,mouse.y);
}</textarea>
  
  
  
  <div class="code-block">

  <div class='code-comment-pair no-comment'><code><pre><span class='one-line'><span class="kt">void</span> <span class="nf">setup</span><span class="o">()</span> <span class="o">{</span></span>
<span class='one-line'>  <span class="n">size</span><span class="o">(</span><span class="mi">640</span><span class="o">,</span><span class="mi">360</span><span class="o">);</span></span>
<span class='one-line'><span class="o">}</span></span>
<span class='one-line'> </span>
<span class='one-line'><span class="kt">void</span> <span class="nf">draw</span><span class="o">()</span> <span class="o">{</span></span>
<span class='one-line'>  <span class="n">background</span><span class="o">(</span><span class="mi">255</span><span class="o">);</span></span></pre></code></div>

  <div class='code-comment-pair stretch'><div class='code-comment stretch'> Two PVectors, one for the mouse location and one for the center of the window</div><code><pre><span class='one-line'>  <span class="n">PVector</span> <span class="n">mouse</span>  <span class="o">=</span> <span class="k">new</span> <span class="n">PVector</span><span class="o">(</span><span class="n">mouseX</span><span class="o">,</span><span class="n">mouseY</span><span class="o">);</span></span>
<span class='one-line'>  <span class="n">PVector</span> <span class="n">center</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PVector</span><span class="o">(</span><span class="n">width</span><span class="o">/</span><span class="mi">2</span><span class="o">,</span><span class="n">height</span><span class="o">/</span><span class="mi">2</span><span class="o">);</span></span></pre></code><div style='position:relative;clear:both;display:block;height:1px;width:100%;'></div></div>

  <div class='code-comment-pair '><div class='code-comment '>
PVector subtraction!</div><code><pre><span class='one-line'>  <span class="n">mouse</span><span class="o">.</span><span class="na">sub</span><span class="o">(</span><span class="n">center</span><span class="o">);</span></span></pre></code></div>

  <div class='code-comment-pair '><div class='code-comment '>Draw a line to represent the vector.</div><code><pre><span class='one-line'>  <span class="n">translate</span><span class="o">(</span><span class="n">width</span><span class="o">/</span><span class="mi">2</span><span class="o">,</span><span class="n">height</span><span class="o">/</span><span class="mi">2</span><span class="o">);</span></span>
<span class='one-line'>  <span class="n">line</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span><span class="mi">0</span><span class="o">,</span><span class="n">mouse</span><span class="o">.</span><span class="na">x</span><span class="o">,</span><span class="n">mouse</span><span class="o">.</span><span class="na">y</span><span class="o">);</span></span>
<span class='one-line'><span class="o">}</span></span></pre></code></div>

</div>
  <div style="position: relative;clear:both;display:block;height:1px;width:100%;"></div>
</div><p><a id="vectorscommutativeassociative-rules-of-additionsubtraction-with-820a51c0-253f-0130-ba90-7cd1c3f718ad" style="display: block;"></a></p>
<div class="note">
  <h5 id="basic-number-properties-with-vectors">Basic Number Properties with Vectors</h5><p>Addition with vectors follow the same algebraic rules as with real numbers.</p>
<p><strong><em>The commutative rule:</em></strong>  <math xmlns="http://www.w3.org/1998/Math/MathML"><mstyle displaystyle="true"><mover><mrow><mi> u </mi></mrow><mrow><mo> → </mo></mrow></mover><mo> + </mo><mover><mrow><mi> v </mi></mrow><mrow><mo> → </mo></mrow></mover><mo> = </mo><mover><mrow><mi> v </mi></mrow><mrow><mo> → </mo></mrow></mover><mo> + </mo><mover><mrow><mi> u </mi></mrow><mrow><mo> → </mo></mrow></mover></mstyle></math><br />
<strong><em>The associative rule:</em></strong>  <math xmlns="http://www.w3.org/1998/Math/MathML"><mstyle displaystyle="true"><mover><mrow><mi> u </mi></mrow><mrow><mo> → </mo></mrow></mover><mo> + </mo><mfenced><mrow><mover><mrow><mi> v </mi></mrow><mrow><mo> → </mo></mrow></mover><mo> + </mo><mover><mrow><mi> w </mi></mrow><mrow><mo> → </mo></mrow></mover></mrow></mfenced><mo> = </mo><mfenced><mrow><mover><mrow><mi> u </mi></mrow><mrow><mo> → </mo></mrow></mover><mo> + </mo><mover><mrow><mi> v </mi></mrow><mrow><mo> → </mo></mrow></mover></mrow></mfenced><mo> + </mo><mover><mrow><mi> w </mi></mrow><mrow><mo> → </mo></mrow></mover></mstyle></math></p>
<p>Fancy terminology and symbols aside, this is really quite a simple concept.  We’re just saying that common sense properties of addition apply to vectors as well.</p>
<p><math xmlns="http://www.w3.org/1998/Math/MathML"><mstyle displaystyle="true"><mn> 3 </mn><mo> + </mo><mn> 2 </mn><mo> = </mo><mn> 2 </mn><mo> + </mo><mn> 3 </mn></mstyle></math><br />
<math xmlns="http://www.w3.org/1998/Math/MathML"><mstyle displaystyle="true"><mfenced><mrow><mn> 3 </mn><mo> + </mo><mn> 2 </mn></mrow></mfenced><mo> + </mo><mn> 1 </mn><mo> = </mo><mn> 3 </mn><mo> + </mo><mfenced><mrow><mn> 2 </mn><mo> + </mo><mn> 1 </mn></mrow></mfenced></mstyle></math></p>

</div></section><section><a id="_vector_multiplication" style="display: block;"></a><h4 id="vector-multiplication">Vector multiplication</h4><p><a id="mult-function-pvector-class-820ab3b0-253f-0130-ba91-7cd1c3f718ad" style="display: block;"></a><a id="pvector-class-processingmult-function-820acaa0-253f-0130-ba92-7cd1c3f718ad" style="display: block;"></a><a id="vectorsmultiplying-820ae530-253f-0130-ba93-7cd1c3f718ad" style="display: block;"></a><a id="vectorsscaling-820afe90-253f-0130-ba94-7cd1c3f718ad" style="display: block;"></a></p>
<p>Moving on to multiplication, we have to think a little bit differently.  When we talk about multiplying a vector, what we typically mean is <strong><em>scaling</em></strong> a vector.  If we wanted to scale a vector to twice its size or one-third of its size (leaving its direction the same), we would say: “Multiply the vector by 2” or “Multiply the vector by 1/3.”   Note that we are multiplying a vector by a scalar, a single number, not another vector.</p>
<p>To scale a vector, we multiply each component (<span class="var">x</span> and <span class="var">y</span>) by a scalar.</p>
<a id="chapter01_figure8" style="display: block;"></a><div class="image-container half-width-right" >
	
	<img src="/book/imgs/chapter01/ch01_08.png" alt="Nature of Code Image" />
	
	<p class="caption">Figure 1.8: Scaling a vector</p>
</div>
<p><math xmlns="http://www.w3.org/1998/Math/MathML"><mstyle displaystyle="true"><mover><mrow><mi> w </mi></mrow><mrow><mo> → </mo></mrow></mover><mo> = </mo><mover><mrow><mi> u </mi></mrow><mrow><mo> → </mo></mrow></mover><mo> * </mo><mi> n </mi></mstyle></math></p>
<p>can be written as:</p>
<p><math xmlns="http://www.w3.org/1998/Math/MathML"><mstyle displaystyle="true"><msub><mrow><mi> w </mi></mrow><mrow><mi> x </mi></mrow></msub><mo> = </mo><msub><mrow><mi> u </mi></mrow><mrow><mi> x </mi></mrow></msub><mo> * </mo><mi> n </mi></mstyle></math><br />
<math xmlns="http://www.w3.org/1998/Math/MathML"><mstyle displaystyle="true"><msub><mrow><mi> w </mi></mrow><mrow><mi> y </mi></mrow></msub><mo> = </mo><msub><mrow><mi> u </mi></mrow><mrow><mi> y </mi></mrow></msub><mo> * </mo><mi> n </mi></mstyle></math></p>
<p>Let’s look at an example with vector notation.</p>
<p><math xmlns="http://www.w3.org/1998/Math/MathML"><mstyle displaystyle="true"><mover><mrow><mi> u </mi></mrow><mrow><mo> → </mo></mrow></mover><mo> = </mo><mfenced><mrow><mo> - </mo><mn> 3 </mn><mo> , </mo><mn> 7 </mn></mrow></mfenced></mstyle></math><br />
<math xmlns="http://www.w3.org/1998/Math/MathML"><mstyle displaystyle="true"><mi> n </mi><mo> = </mo><mn> 3 </mn></mstyle></math></p>
<p><math xmlns="http://www.w3.org/1998/Math/MathML"><mstyle displaystyle="true"><mover><mrow><mi> w </mi></mrow><mrow><mo> → </mo></mrow></mover><mo> = </mo><mover><mrow><mi> u </mi></mrow><mrow><mo> → </mo></mrow></mover><mo> * </mo><mi> n </mi></mstyle></math><br />
<math xmlns="http://www.w3.org/1998/Math/MathML"><mstyle displaystyle="true"><msub><mrow><mi> w </mi></mrow><mrow><mi> x </mi></mrow></msub><mo> = </mo><mo> - </mo><mn> 3 </mn><mo> * </mo><mn> 3 </mn></mstyle></math><br />
<math xmlns="http://www.w3.org/1998/Math/MathML"><mstyle displaystyle="true"><msub><mrow><mi> w </mi></mrow><mrow><mi> y </mi></mrow></msub><mo> = </mo><mn> 7 </mn><mo> * </mo><mn> 3 </mn></mstyle></math></p>
<p><math xmlns="http://www.w3.org/1998/Math/MathML"><mstyle displaystyle="true"><mover><mrow><mi> w </mi></mrow><mrow><mo> → </mo></mrow></mover><mo> = </mo><mfenced><mrow><mo> - </mo><mn> 9 </mn><mo> , </mo><mn> 21 </mn></mrow></mfenced></mstyle></math></p>
<p>Therefore, the function inside the <span class="klass">PVector</span> class is written as:</p>
<div class="source-code">
  <a class="toggle" href="#" data-to-raw='Show Raw' data-to-formatted='Show Formatted'>Show Raw</a>
  <textarea>void mult(float n) {
   //[full] With multiplication, the components of the vector are multiplied by a number.
   x = x * n;
   y = y * n;
   //[end]
 }</textarea>
  
  
  
  <div class="code-block">

  <div class='code-comment-pair no-comment'><code><pre><span class='one-line'><span class="kt">void</span> <span class="nf">mult</span><span class="o">(</span><span class="kt">float</span> <span class="n">n</span><span class="o">)</span> <span class="o">{</span></span></pre></code></div>

  <div class='code-comment-pair stretch'><div class='code-comment stretch'> With multiplication, the components of the vector are multiplied by a number.</div><code><pre><span class='one-line'>   <span class="n">x</span> <span class="o">=</span> <span class="n">x</span> <span class="o">*</span> <span class="n">n</span><span class="o">;</span></span>
<span class='one-line'>   <span class="n">y</span> <span class="o">=</span> <span class="n">y</span> <span class="o">*</span> <span class="n">n</span><span class="o">;</span></span></pre></code><div style='position:relative;clear:both;display:block;height:1px;width:100%;'></div></div>

  <div class='code-comment-pair no-comment'><code><pre><span class='one-line'> <span class="o">}</span></span></pre></code></div>

</div>
  <div style="position: relative;clear:both;display:block;height:1px;width:100%;"></div>
</div><p>And implementing multiplication in code is as simple as:</p>
<p><a id="mult-function-pvector-classimplementation-820bae20-253f-0130-ba95-7cd1c3f718ad" style="display: block;"></a></p>
<div class="source-code">
  <a class="toggle" href="#" data-to-raw='Show Raw' data-to-formatted='Show Formatted'>Show Raw</a>
  <textarea>PVector u = new PVector(-3,7);
// This PVector is now three times the size and is equal to (-9,21).
u.mult(3);</textarea>
  
  
  
  <div class="code-block">

  <div class='code-comment-pair no-comment'><code><pre><span class='one-line'><span class="n">PVector</span> <span class="n">u</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PVector</span><span class="o">(-</span><span class="mi">3</span><span class="o">,</span><span class="mi">7</span><span class="o">);</span></span></pre></code></div>

  <div class='code-comment-pair '><div class='code-comment '>This PVector is now three times the size and is equal to (-9,21).</div><code><pre><span class='one-line'><span class="n">u</span><span class="o">.</span><span class="na">mult</span><span class="o">(</span><span class="mi">3</span><span class="o">);</span></span></pre></code></div>

</div>
  <div style="position: relative;clear:both;display:block;height:1px;width:100%;"></div>
</div><div class="image-container screenshot" >
	
	<canvas data-processing-sources="/book/processingjs/chapter01/_1_4_vector_multiplication/_1_4_vector_multiplication.pde" class="screenshot">
		<p>Your browser does not support the canvas tag.</p>
	</canvas>
  <div class="sketch-controls">
    <button class="reset">RESET</button>
    <button class="pause">PAUSE</button>
  </div>
	
	
</div>
<p><a id="chapter01_example4" style="display: block;"></a><span class="example">Example 1.4: Multiplying a vector</span></p>
<div class="source-code">
  <a class="toggle" href="#" data-to-raw='Show Raw' data-to-formatted='Show Formatted'>Show Raw</a>
  <textarea>void setup() {
  size(640,360);
}

void draw() {
  background(255);

  PVector mouse = new PVector(mouseX,mouseY);
  PVector center = new PVector(width/2,height/2);
  mouse.sub(center);

  // Multiplying a vector!  The vector is now half its original size (multiplied by 0.5).
  mouse.mult(0.5);

  translate(width/2,height/2);
  line(0,0,mouse.x,mouse.y);

}</textarea>
  
  
  
  <div class="code-block">

  <div class='code-comment-pair no-comment'><code><pre><span class='one-line'><span class="kt">void</span> <span class="nf">setup</span><span class="o">()</span> <span class="o">{</span></span>
<span class='one-line'>  <span class="n">size</span><span class="o">(</span><span class="mi">640</span><span class="o">,</span><span class="mi">360</span><span class="o">);</span></span>
<span class='one-line'><span class="o">}</span></span>
<span class='one-line'> </span>
<span class='one-line'><span class="kt">void</span> <span class="nf">draw</span><span class="o">()</span> <span class="o">{</span></span>
<span class='one-line'>  <span class="n">background</span><span class="o">(</span><span class="mi">255</span><span class="o">);</span></span>
<span class='one-line'> </span>
<span class='one-line'>  <span class="n">PVector</span> <span class="n">mouse</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PVector</span><span class="o">(</span><span class="n">mouseX</span><span class="o">,</span><span class="n">mouseY</span><span class="o">);</span></span>
<span class='one-line'>  <span class="n">PVector</span> <span class="n">center</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PVector</span><span class="o">(</span><span class="n">width</span><span class="o">/</span><span class="mi">2</span><span class="o">,</span><span class="n">height</span><span class="o">/</span><span class="mi">2</span><span class="o">);</span></span>
<span class='one-line'>  <span class="n">mouse</span><span class="o">.</span><span class="na">sub</span><span class="o">(</span><span class="n">center</span><span class="o">);</span></span>
<span class='one-line'> </span></pre></code></div>

  <div class='code-comment-pair '><div class='code-comment '>Multiplying a vector!  The vector is now half its original size (multiplied by 0.5).</div><code><pre><span class='one-line'>  <span class="n">mouse</span><span class="o">.</span><span class="na">mult</span><span class="o">(</span><span class="mf">0.5</span><span class="o">);</span></span>
<span class='one-line'> </span>
<span class='one-line'>  <span class="n">translate</span><span class="o">(</span><span class="n">width</span><span class="o">/</span><span class="mi">2</span><span class="o">,</span><span class="n">height</span><span class="o">/</span><span class="mi">2</span><span class="o">);</span></span>
<span class='one-line'>  <span class="n">line</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span><span class="mi">0</span><span class="o">,</span><span class="n">mouse</span><span class="o">.</span><span class="na">x</span><span class="o">,</span><span class="n">mouse</span><span class="o">.</span><span class="na">y</span><span class="o">);</span></span>
<span class='one-line'> </span>
<span class='one-line'><span class="o">}</span></span></pre></code></div>

</div>
  <div style="position: relative;clear:both;display:block;height:1px;width:100%;"></div>
</div><a id="chapter01_figure9" style="display: block;"></a><div class="image-container half-width-right" >
	
	<img src="/book/imgs/chapter01/ch01_09.png" alt="Nature of Code Image" />
	
	<p class="caption">Figure 1.9</p>
</div>
<p><a id="div-function-pvector-class-820bf5c0-253f-0130-ba96-7cd1c3f718ad" style="display: block;"></a><a id="pvector-class-processingdiv-function-820c0fb0-253f-0130-ba97-7cd1c3f718ad" style="display: block;"></a></p>
<p>Division works just like multiplication—we simply replace the multiplication sign (asterisk) with the division sign (forward slash).</p>
<div class="source-code">
  <a class="toggle" href="#" data-to-raw='Show Raw' data-to-formatted='Show Formatted'>Show Raw</a>
  <textarea>void div(float n) {
  x = x / n;
  y = y / n;
}

PVector u = new PVector(8,-4);
// Dividing a vector!  The vector is now half its original size (divided by 2).
u.div(2);</textarea>
  
  
  
  <div class="code-block">

  <div class='code-comment-pair no-comment'><code><pre><span class='one-line'><span class="kt">void</span> <span class="nf">div</span><span class="o">(</span><span class="kt">float</span> <span class="n">n</span><span class="o">)</span> <span class="o">{</span></span>
<span class='one-line'>  <span class="n">x</span> <span class="o">=</span> <span class="n">x</span> <span class="o">/</span> <span class="n">n</span><span class="o">;</span></span>
<span class='one-line'>  <span class="n">y</span> <span class="o">=</span> <span class="n">y</span> <span class="o">/</span> <span class="n">n</span><span class="o">;</span></span>
<span class='one-line'><span class="o">}</span></span>
<span class='one-line'> </span>
<span class='one-line'><span class="n">PVector</span> <span class="n">u</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PVector</span><span class="o">(</span><span class="mi">8</span><span class="o">,-</span><span class="mi">4</span><span class="o">);</span></span></pre></code></div>

  <div class='code-comment-pair '><div class='code-comment '>Dividing a vector!  The vector is now half its original size (divided by 2).</div><code><pre><span class='one-line'><span class="n">u</span><span class="o">.</span><span class="na">div</span><span class="o">(</span><span class="mi">2</span><span class="o">);</span></span></pre></code></div>

</div>
  <div style="position: relative;clear:both;display:block;height:1px;width:100%;"></div>
</div><p><a id="vectorsassociativedistributive-rules-for-multiplicationdivision-of-820c3880-253f-0130-ba98-7cd1c3f718ad" style="display: block;"></a></p>
<div class="note">
  <h5 id="more-number-properties-with-vectors">More Number Properties with Vectors</h5><p>As with addition, basic algebraic rules of multiplication apply to vectors.</p>
<p>The associative rule: <math xmlns="http://www.w3.org/1998/Math/MathML"><mstyle displaystyle="true"><mfenced><mrow><mi> n </mi><mo> * </mo><mi> m </mi></mrow></mfenced><mo> * </mo><mover><mrow><mi> v </mi></mrow><mrow><mo> → </mo></mrow></mover><mo> = </mo><mi> n </mi><mo> * </mo><mfenced><mrow><mi> m </mi><mo> * </mo><mover><mrow><mi> v </mi></mrow><mrow><mo> → </mo></mrow></mover></mrow></mfenced></mstyle></math><br />
The distributive rule with 2 scalars, 1 vector: <math xmlns="http://www.w3.org/1998/Math/MathML"><mstyle displaystyle="true"><mfenced><mrow><mi> n </mi><mo> + </mo><mi> m </mi></mrow></mfenced><mo> * </mo><mover><mrow><mi> v </mi></mrow><mrow><mo> → </mo></mrow></mover><mo> = </mo><mi> n </mi><mo> * </mo><mover><mrow><mi> v </mi></mrow><mrow><mo> → </mo></mrow></mover><mo> + </mo><mi> m </mi><mo> * </mo><mover><mrow><mi> v </mi></mrow><mrow><mo> → </mo></mrow></mover></mstyle></math><br />
The distributive rule with 2 vectors, 1 scalar: <math xmlns="http://www.w3.org/1998/Math/MathML"><mstyle displaystyle="true"><mfenced><mrow><mover><mrow><mi> u </mi></mrow><mrow><mo> → </mo></mrow></mover><mo> + </mo><mover><mrow><mi> v </mi></mrow><mrow><mo> → </mo></mrow></mover></mrow></mfenced><mo> * </mo><mi> n </mi><mo> = </mo><mover><mrow><mi> u </mi></mrow><mrow><mo> → </mo></mrow></mover><mo> * </mo><mi> n </mi><mo> + </mo><mover><mrow><mi> v </mi></mrow><mrow><mo> → </mo></mrow></mover><mo> * </mo><mi> n </mi></mstyle></math></p>

</div></section></section><section><a id="chapter01_section5" style="display: block;"></a><h3 id="15-vector-magnitude">1.5 Vector Magnitude</h3><p><a id="magnitude-of-vectors-820c7ee0-253f-0130-ba99-7cd1c3f718ad" style="display: block;"></a><a id="vectorsmagnitude-820c9240-253f-0130-ba9a-7cd1c3f718ad" style="display: block;"></a></p>
<p>Multiplication and division, as we just saw, are means by which the length of the vector can be changed without affecting direction.  Perhaps you’re wondering: “OK, so how do I know what the length of a vector is?  I know the components (<span class="var">x</span> and <span class="var">y</span>), but how long (in pixels) is the actual arrow?” Understanding how to calculate the length (also known as <strong><em>magnitude</em></strong>) of a vector is incredibly useful and important.</p>
<div class="image-container half-width-right" >
  <img src="/book/imgs/chapter01/ch01_10.png" alt="Nature of Code Image" />
  <p class="caption">Figure 1.10: The length or “magnitude” of a vector

  <svg:svg xmlns="http://www.w3.org/1998/Math/MathML" xmlns:svg="http://www.w3.org/2000/svg" height="12.190371pt" width="8.520000pt" xmlns:svgmath="http://www.grigoriev.ru/svgmath" viewBox="0 -9.600527 8.520000 12.190371"><svg:metadata><svgmath:metrics top="12.1903710937" axis="6.57421875" baseline="2.58984375" bottom="2.44921875"/></svg:metadata><svg:g transform="translate(1.596914, 0.000000)"><svg:text font-size="12.000000" text-anchor="middle" y="0.000000" x="2.663086" font-family="Times New Roman" font-style="italic" fill="black">v</svg:text></svg:g><svg:g transform="translate(0.000000, -8.785137)"><svg:text font-size="8.520000" text-anchor="middle" y="2.828906" x="4.260000" font-family="Times New Roman" fill="black">→</svg:text></svg:g></svg:svg>

  is often written as:

 <svg:svg xmlns="http://www.w3.org/1998/Math/MathML" xmlns:svg="http://www.w3.org/2000/svg" height="12.503906pt" width="29.061672pt" xmlns:svgmath="http://www.grigoriev.ru/svgmath" viewBox="0 -9.914062 29.061672 12.503906"><svg:metadata><svgmath:metrics top="12.357421875" axis="6.57421875" baseline="2.58984375" bottom="1.37109375"/></svg:metadata><svg:g transform="translate(0.000000, -3.984375)"><svg:text font-size="12.000000" text-anchor="middle" y="3.468750" x="3.468750" font-family="Lucida Sans Unicode" fill="black">∥</svg:text></svg:g><svg:g transform="translate(10.270836, 0.000000)"><svg:g transform="translate(1.596914, 0.000000)"><svg:text font-size="12.000000" text-anchor="middle" y="0.000000" x="2.663086" font-family="Times New Roman" font-style="italic" fill="black">v</svg:text></svg:g><svg:g transform="translate(0.000000, -8.785137)"><svg:text font-size="8.520000" text-anchor="middle" y="2.828906" x="4.260000" font-family="Times New Roman" fill="black">→</svg:text></svg:g></svg:g><svg:g transform="translate(22.124172, -3.984375)"><svg:text font-size="12.000000" text-anchor="middle" y="3.468750" x="3.468750" font-family="Lucida Sans Unicode" fill="black">∥</svg:text></svg:g></svg:svg>

  </p>
</div><p><a id="pythagoras-820e4f50-253f-0130-ba9b-7cd1c3f718ad" style="display: block;"></a><a id="pythagorean-theorem-820e5ea0-253f-0130-ba9c-7cd1c3f718ad" style="display: block;"></a></p>
<p>Notice in the above diagram how the vector, drawn as an arrow and two components (<span class="var">x</span> and <span class="var">y</span>), creates a right triangle.  The sides are the components and the hypotenuse is the arrow itself.   We’re very lucky to have this right triangle, because once upon a time, a Greek mathematician named Pythagoras developed a lovely formula to describe the relationship between the sides and hypotenuse of a right triangle.</p>
<a id="chapter01_figure11" style="display: block;"></a><div class="image-container half-width-right" >
	
	<img src="/book/imgs/chapter01/ch01_11.png" alt="Nature of Code Image" />
	
	<p class="caption">Figure 1.11: The Pythagorean Theorem</p>
</div>
<p>The Pythagorean theorem is <em>a</em> squared plus <em>b</em> squared equals <em>c</em> squared.</p>
<p>Armed with this formula, we can now compute the magnitude of <math xmlns="http://www.w3.org/1998/Math/MathML"><mstyle displaystyle="true"><mover><mrow><mi>v</mi></mrow><mrow><mo>→</mo></mrow></mover></mstyle></math> as follows:</p>
<p><math xmlns="http://www.w3.org/1998/Math/MathML"><mstyle displaystyle="true"><mfenced open="∥" close="∥"><mrow><mover><mrow><mi> v </mi></mrow><mrow><mo> → </mo></mrow></mover></mrow></mfenced><mo> = </mo><msqrt><msub><mrow><mi> v </mi></mrow><mrow><mi> x </mi></mrow></msub><mo> * </mo><msub><mrow><mi> v </mi></mrow><mrow><mi> x </mi></mrow></msub><mo> + </mo><msub><mrow><mi> v </mi></mrow><mrow><mi> y </mi></mrow></msub><mo> * </mo><msub><mrow><mi> v </mi></mrow><mrow><mi> y </mi></mrow></msub></msqrt></mstyle></math></p>
<p>or in <span class="klass">PVector</span>:</p>
<div class="source-code">
  <a class="toggle" href="#" data-to-raw='Show Raw' data-to-formatted='Show Formatted'>Show Raw</a>
  <textarea>float mag() {
  return sqrt(x*x + y*y);
}</textarea>
  
  
  
  <div class="code-block">

  <div class='code-comment-pair no-comment'><code><pre><span class='one-line'><span class="kt">float</span> <span class="nf">mag</span><span class="o">()</span> <span class="o">{</span></span>
<span class='one-line'>  <span class="k">return</span> <span class="nf">sqrt</span><span class="o">(</span><span class="n">x</span><span class="o">*</span><span class="n">x</span> <span class="o">+</span> <span class="n">y</span><span class="o">*</span><span class="n">y</span><span class="o">);</span></span>
<span class='one-line'><span class="o">}</span></span></pre></code></div>

</div>
  <div style="position: relative;clear:both;display:block;height:1px;width:100%;"></div>
</div><div class="image-container screenshot" >
	
	<canvas data-processing-sources="/book/processingjs/chapter01/_1_5_vector_magnitude/_1_5_vector_magnitude.pde" class="screenshot">
		<p>Your browser does not support the canvas tag.</p>
	</canvas>
  <div class="sketch-controls">
    <button class="reset">RESET</button>
    <button class="pause">PAUSE</button>
  </div>
	
	
</div>
<p><a id="chapter01_example5" style="display: block;"></a><span class="example">Example 1.5: Vector magnitude</span></p>
<p><a id="mag-function-pvector-class-820ecbb0-253f-0130-ba9d-7cd1c3f718ad" style="display: block;"></a><a id="pvector-class-processingmag-function-820ee1d0-253f-0130-ba9e-7cd1c3f718ad" style="display: block;"></a></p>
<div class="source-code">
  <a class="toggle" href="#" data-to-raw='Show Raw' data-to-formatted='Show Formatted'>Show Raw</a>
  <textarea>void setup() {
  size(640,360);
}

void draw() {
  background(255);

  PVector mouse = new PVector(mouseX,mouseY);
  PVector center = new PVector(width/2,height/2);
  mouse.sub(center);

  //[full] The magnitude (i.e. length) of a vector can be accessed via the mag() function.  Here it is used as the width of a rectangle drawn at the top of the window.
  float m = mouse.mag();
  fill(0);
  rect(0,0,m,10);

  //[end]

  translate(width/2,height/2);
  line(0,0,mouse.x,mouse.y);

}</textarea>
  
  
  
  <div class="code-block">

  <div class='code-comment-pair no-comment'><code><pre><span class='one-line'><span class="kt">void</span> <span class="nf">setup</span><span class="o">()</span> <span class="o">{</span></span>
<span class='one-line'>  <span class="n">size</span><span class="o">(</span><span class="mi">640</span><span class="o">,</span><span class="mi">360</span><span class="o">);</span></span>
<span class='one-line'><span class="o">}</span></span>
<span class='one-line'> </span>
<span class='one-line'><span class="kt">void</span> <span class="nf">draw</span><span class="o">()</span> <span class="o">{</span></span>
<span class='one-line'>  <span class="n">background</span><span class="o">(</span><span class="mi">255</span><span class="o">);</span></span>
<span class='one-line'> </span>
<span class='one-line'>  <span class="n">PVector</span> <span class="n">mouse</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PVector</span><span class="o">(</span><span class="n">mouseX</span><span class="o">,</span><span class="n">mouseY</span><span class="o">);</span></span>
<span class='one-line'>  <span class="n">PVector</span> <span class="n">center</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PVector</span><span class="o">(</span><span class="n">width</span><span class="o">/</span><span class="mi">2</span><span class="o">,</span><span class="n">height</span><span class="o">/</span><span class="mi">2</span><span class="o">);</span></span>
<span class='one-line'>  <span class="n">mouse</span><span class="o">.</span><span class="na">sub</span><span class="o">(</span><span class="n">center</span><span class="o">);</span></span>
<span class='one-line'> </span></pre></code></div>

  <div class='code-comment-pair stretch'><div class='code-comment stretch'> The magnitude (i.e. length) of a vector can be accessed via the mag() function.  Here it is used as the width of a rectangle drawn at the top of the window.</div><code><pre><span class='one-line'>  <span class="kt">float</span> <span class="n">m</span> <span class="o">=</span> <span class="n">mouse</span><span class="o">.</span><span class="na">mag</span><span class="o">();</span></span>
<span class='one-line'>  <span class="n">fill</span><span class="o">(</span><span class="mi">0</span><span class="o">);</span></span>
<span class='one-line'>  <span class="n">rect</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span><span class="mi">0</span><span class="o">,</span><span class="n">m</span><span class="o">,</span><span class="mi">10</span><span class="o">);</span></span>
<span class='one-line'> </span></pre></code><div style='position:relative;clear:both;display:block;height:1px;width:100%;'></div></div>

  <div class='code-comment-pair no-comment'><code><pre><span class='one-line'> </span>
<span class='one-line'>  <span class="n">translate</span><span class="o">(</span><span class="n">width</span><span class="o">/</span><span class="mi">2</span><span class="o">,</span><span class="n">height</span><span class="o">/</span><span class="mi">2</span><span class="o">);</span></span>
<span class='one-line'>  <span class="n">line</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span><span class="mi">0</span><span class="o">,</span><span class="n">mouse</span><span class="o">.</span><span class="na">x</span><span class="o">,</span><span class="n">mouse</span><span class="o">.</span><span class="na">y</span><span class="o">);</span></span>
<span class='one-line'> </span>
<span class='one-line'><span class="o">}</span></span></pre></code></div>

</div>
  <div style="position: relative;clear:both;display:block;height:1px;width:100%;"></div>
</div></section><section><a id="chapter01_section6" style="display: block;"></a><h3 id="16-normalizing-vectors">1.6 Normalizing Vectors</h3><p><a id="normalization-820f0cb0-253f-0130-ba9f-7cd1c3f718ad" style="display: block;"></a><a id="unit-vectors-820f2300-253f-0130-baa0-7cd1c3f718ad" style="display: block;"></a><a id="vectorsnormalization-820f3270-253f-0130-baa1-7cd1c3f718ad" style="display: block;"></a><a id="vectorsunit-vectors-820f4680-253f-0130-baa2-7cd1c3f718ad" style="display: block;"></a></p>
<p>Calculating the magnitude of a vector is only the beginning.  The magnitude function opens the door to many possibilities, the first of which is <strong><em>normalization</em></strong>.  Normalizing refers to the process of making something “standard” or, well, “normal.”  In the case of vectors, let’s assume for the moment that a standard vector has a length of 1.  To normalize a vector, therefore, is to take a vector of any length and, keeping it pointing in the same direction, change its length to 1, turning it into what is called a <strong><em>unit vector</em></strong>.</p>
<a id="chapter01_figure12" style="display: block;"></a><div class="image-container half-width-right" >
	
	<img src="/book/imgs/chapter01/ch01_12.png" alt="Nature of Code Image" />
	
	<p class="caption">Figure 1.12</p>
</div>
<p>Since it describes a vector’s direction without regard to its length, it’s useful to have the unit vector readily accessible.  We’ll see this come in handy once we start to work with forces in Chapter 2.</p>
<p>For any given vector <math xmlns="http://www.w3.org/1998/Math/MathML"><mstyle displaystyle="true"><mover><mrow><mi>u</mi></mrow><mrow><mo>→</mo></mrow></mover></mstyle></math>, its unit vector (written as <math xmlns="http://www.w3.org/1998/Math/MathML"><mstyle displaystyle="true"><mover><mrow><mi> u </mi></mrow><mrow><mo> ∧ </mo></mrow></mover></mstyle></math>) is calculated as follows:</p>
<p><math xmlns="http://www.w3.org/1998/Math/MathML"><mstyle displaystyle="true"><mover><mrow><mi> u </mi></mrow><mrow><mo> ∧ </mo></mrow></mover><mo> = </mo><mfrac><mrow><mover><mrow><mi> u </mi></mrow><mrow><mo> → </mo></mrow></mover></mrow><mrow><mfenced open="∥" close="∥"><mrow><mover><mrow><mi> u </mi></mrow><mrow><mo> → </mo></mrow></mover></mrow></mfenced></mrow></mfrac></mstyle></math></p>
<p>In other words, to normalize a vector, simply divide each component by its magnitude.  This is pretty intuitive.  Say a vector is of length 5.  Well, 5 divided by 5 is 1.  So, looking at our right triangle, we then need to scale the hypotenuse down by dividing by 5.   In that process the sides shrink, divided by 5 as well.</p>
<p><a id="normalize-function-pvector-class-820f9230-253f-0130-baa3-7cd1c3f718ad" style="display: block;"></a><a id="pvector-class-processingnormalize-function-820fabc0-253f-0130-baa4-7cd1c3f718ad" style="display: block;"></a></p>
<a id="chapter01_figure13" style="display: block;"></a><div class="image-container half-width-right" >
	
	<img src="/book/imgs/chapter01/ch01_13.png" alt="Nature of Code Image" />
	
	<p class="caption">Figure 1.13</p>
</div>
<p>In the <span class="klass">PVector</span> class, we therefore write our normalization function as follows:</p>
<div class="source-code">
  <a class="toggle" href="#" data-to-raw='Show Raw' data-to-formatted='Show Formatted'>Show Raw</a>
  <textarea>void normalize() {
  float m = mag();
  div(m);
}</textarea>
  
  
  
  <div class="code-block">

  <div class='code-comment-pair no-comment'><code><pre><span class='one-line'><span class="kt">void</span> <span class="nf">normalize</span><span class="o">()</span> <span class="o">{</span></span>
<span class='one-line'>  <span class="kt">float</span> <span class="n">m</span> <span class="o">=</span> <span class="n">mag</span><span class="o">();</span></span>
<span class='one-line'>  <span class="n">div</span><span class="o">(</span><span class="n">m</span><span class="o">);</span></span>
<span class='one-line'><span class="o">}</span></span></pre></code></div>

</div>
  <div style="position: relative;clear:both;display:block;height:1px;width:100%;"></div>
</div><p>Of course, there’s one small issue.  What if the magnitude of the vector is 0?  We can’t divide by 0!   Some quick error checking will fix that right up:</p>
<div class="source-code">
  <a class="toggle" href="#" data-to-raw='Show Raw' data-to-formatted='Show Formatted'>Show Raw</a>
  <textarea>void normalize() {
 float m = mag();
 if (m != 0) {
   div(m);
 }
}</textarea>
  
  
  
  <div class="code-block">

  <div class='code-comment-pair no-comment'><code><pre><span class='one-line'><span class="kt">void</span> <span class="nf">normalize</span><span class="o">()</span> <span class="o">{</span></span>
<span class='one-line'> <span class="kt">float</span> <span class="n">m</span> <span class="o">=</span> <span class="n">mag</span><span class="o">();</span></span>
<span class='one-line'> <span class="k">if</span> <span class="o">(</span><span class="n">m</span> <span class="o">!=</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span></span>
<span class='one-line'>   <span class="n">div</span><span class="o">(</span><span class="n">m</span><span class="o">);</span></span>
<span class='one-line'> <span class="o">}</span></span>
<span class='one-line'><span class="o">}</span></span></pre></code></div>

</div>
  <div style="position: relative;clear:both;display:block;height:1px;width:100%;"></div>
</div><div class="image-container screenshot" >
	
	<canvas data-processing-sources="/book/processingjs/chapter01/_1_6_vector_normalize/_1_6_vector_normalize.pde" class="screenshot">
		<p>Your browser does not support the canvas tag.</p>
	</canvas>
  <div class="sketch-controls">
    <button class="reset">RESET</button>
    <button class="pause">PAUSE</button>
  </div>
	
	
</div>
<p><a id="chapter01_example6" style="display: block;"></a><span class="example">Example 1.6: Normalizing a vector</span></p>
<div class="source-code">
  <a class="toggle" href="#" data-to-raw='Show Raw' data-to-formatted='Show Formatted'>Show Raw</a>
  <textarea>void draw() {
  background(255);

  PVector mouse = new PVector(mouseX,mouseY);
  PVector center = new PVector(width/2,height/2);
  mouse.sub(center);

  // In this example, after the vector is normalized, it is multiplied by 50 so that it is viewable onscreen. Note that no matter where the mouse is, the vector will have the same length (50) due to the normalization process.
  mouse.normalize();
  mouse.mult(50);
  translate(width/2,height/2);
  line(0,0,mouse.x,mouse.y);

}</textarea>
  
  
  
  <div class="code-block">

  <div class='code-comment-pair no-comment'><code><pre><span class='one-line'><span class="kt">void</span> <span class="nf">draw</span><span class="o">()</span> <span class="o">{</span></span>
<span class='one-line'>  <span class="n">background</span><span class="o">(</span><span class="mi">255</span><span class="o">);</span></span>
<span class='one-line'> </span>
<span class='one-line'>  <span class="n">PVector</span> <span class="n">mouse</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PVector</span><span class="o">(</span><span class="n">mouseX</span><span class="o">,</span><span class="n">mouseY</span><span class="o">);</span></span>
<span class='one-line'>  <span class="n">PVector</span> <span class="n">center</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PVector</span><span class="o">(</span><span class="n">width</span><span class="o">/</span><span class="mi">2</span><span class="o">,</span><span class="n">height</span><span class="o">/</span><span class="mi">2</span><span class="o">);</span></span>
<span class='one-line'>  <span class="n">mouse</span><span class="o">.</span><span class="na">sub</span><span class="o">(</span><span class="n">center</span><span class="o">);</span></span>
<span class='one-line'> </span></pre></code></div>

  <div class='code-comment-pair '><div class='code-comment '>In this example, after the vector is normalized, it is multiplied by 50 so that it is viewable onscreen. Note that no matter where the mouse is, the vector will have the same length (50) due to the normalization process.</div><code><pre><span class='one-line'>  <span class="n">mouse</span><span class="o">.</span><span class="na">normalize</span><span class="o">();</span></span>
<span class='one-line'>  <span class="n">mouse</span><span class="o">.</span><span class="na">mult</span><span class="o">(</span><span class="mi">50</span><span class="o">);</span></span>
<span class='one-line'>  <span class="n">translate</span><span class="o">(</span><span class="n">width</span><span class="o">/</span><span class="mi">2</span><span class="o">,</span><span class="n">height</span><span class="o">/</span><span class="mi">2</span><span class="o">);</span></span>
<span class='one-line'>  <span class="n">line</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span><span class="mi">0</span><span class="o">,</span><span class="n">mouse</span><span class="o">.</span><span class="na">x</span><span class="o">,</span><span class="n">mouse</span><span class="o">.</span><span class="na">y</span><span class="o">);</span></span>
<span class='one-line'> </span>
<span class='one-line'><span class="o">}</span></span></pre></code></div>

</div>
  <div style="position: relative;clear:both;display:block;height:1px;width:100%;"></div>
</div></section><section><a id="chapter01_section7" style="display: block;"></a><h3 id="17-vector-motion-velocity">1.7 Vector Motion: Velocity</h3><p><a id="motion-821004f0-253f-0130-baa5-7cd1c3f718ad" style="display: block;"></a><a id="vectorsvelocity-and-82101730-253f-0130-baa6-7cd1c3f718ad" style="display: block;"></a><a id="velocity-82102d00-253f-0130-baa7-7cd1c3f718ad" style="display: block;"></a></p>
<p>All this vector math stuff sounds like something we should know about, but why?  How will it actually help us write code?   The truth of the matter is that we need to have some patience.  It will take some time before the awesomeness of using the <span class="klass">PVector</span> class fully comes to light.  This is actually a common occurrence when first learning a new data structure.   For example, when you first learn about an array, it might seem like much more work to use an array than to just have several variables stand for multiple things.   But that plan quickly breaks down when you need a hundred, or a thousand, or ten thousand things.  The same can be true for <span class="klass">PVector</span>.  What might seem like more work now will pay off later, and pay off quite nicely.  And you don’t have to wait too long, as your reward will come in the next chapter.</p>
<p>For now, however, we want to focus on simplicity.  What does it mean to program motion using vectors?   We’ve seen the beginning of this in <a href="#chapter01_example2">Example 1.2</a>: the bouncing ball.   An object on screen has a location (where it is at any given moment) as well as a velocity (instructions for how it should move from one moment to the next).   Velocity is added to location:</p>
<div class="source-code">
  <a class="toggle" href="#" data-to-raw='Show Raw' data-to-formatted='Show Formatted'>Show Raw</a>
  <textarea>location.add(velocity);</textarea>
  
  
  
  <div class="code-block">

  <div class='code-comment-pair no-comment'><code><pre><span class='one-line'><span class="n">location</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">velocity</span><span class="o">);</span></span></pre></code></div>

</div>
  <div style="position: relative;clear:both;display:block;height:1px;width:100%;"></div>
</div><p>And then we draw the object at that location:</p>
<div class="source-code">
  <a class="toggle" href="#" data-to-raw='Show Raw' data-to-formatted='Show Formatted'>Show Raw</a>
  <textarea>ellipse(location.x,location.y,16,16);</textarea>
  
  
  
  <div class="code-block">

  <div class='code-comment-pair no-comment'><code><pre><span class='one-line'><span class="n">ellipse</span><span class="o">(</span><span class="n">location</span><span class="o">.</span><span class="na">x</span><span class="o">,</span><span class="n">location</span><span class="o">.</span><span class="na">y</span><span class="o">,</span><span class="mi">16</span><span class="o">,</span><span class="mi">16</span><span class="o">);</span></span></pre></code></div>

</div>
  <div style="position: relative;clear:both;display:block;height:1px;width:100%;"></div>
</div><p>This is Motion 101.</p>
<div class="list">
	
	<ol class="arabic">
		
			<li><p><strong><em>Add velocity to location</em></strong></p>
</li>
		
			<li><p><strong><em>Draw object at location</em></strong></p>
</li>
		
	</ol>
</div><p><a id="processingoop-online-tutorial-82108700-253f-0130-baa8-7cd1c3f718ad" style="display: block;"></a></p>
<p>In the bouncing ball example, all of this code happened in Processing’s main tab, within <span class="function">setup()</span> and <span class="function">draw()</span>.   What we want to do now is move towards encapsulating all of the logic for motion inside of a <strong><em>class</em></strong>. This way, we can create a foundation for programming moving objects in Processing.    In <a href="#intro_section2">section I.2 of the introduction</a>, “The Random Walker Class,” we briefly reviewed the basics of object-oriented-programming (“OOP”).   Beyond that short introduction, this book assumes experience with objects and classes in Processing.   If you need a refresher, I encourage you to check out the <a href="http://processing.org/learning/objects/">Processing objects tutorial</a>.</p>
<p>In this case, we’re going to create a generic <span class="klass">Mover</span> class that will describe a thing moving around the screen.  And so we must consider the following two questions:</p>
<div class="list">
	
	<ol class="arabic">
		
			<li><p><strong><em>What data does a mover have?</em></strong></p>
</li>
		
			<li><p><strong><em>What functionality does a mover have?</em></strong></p>
</li>
		
	</ol>
</div><p>Our Motion 101 algorithm tells us the answers to these questions.  A <span class="klass">Mover</span> object has two pieces of data: <span class="var">location</span> and <span class="var">velocity</span>, which are both <span class="klass">PVector</span> objects.</p>
<div class="source-code">
  <a class="toggle" href="#" data-to-raw='Show Raw' data-to-formatted='Show Formatted'>Show Raw</a>
  <textarea>class Mover {

  PVector location;
  PVector velocity;</textarea>
  
  
  
  <div class="code-block">

  <div class='code-comment-pair no-comment'><code><pre><span class='one-line'><span class="kd">class</span> <span class="nc">Mover</span> <span class="o">{</span></span>
<span class='one-line'> </span>
<span class='one-line'>  <span class="n">PVector</span> <span class="n">location</span><span class="o">;</span></span>
<span class='one-line'>  <span class="n">PVector</span> <span class="n">velocity</span><span class="o">;</span></span></pre></code></div>

</div>
  <div style="position: relative;clear:both;display:block;height:1px;width:100%;"></div>
</div><p>Its functionality is just about as simple.  The <span class="klass">Mover</span> needs to move and it needs to be seen.  We’ll implement these needs as functions named <span class="function">update()</span> and <span class="function">display()</span>.   We’ll put all of our motion logic code in <span class="function">update()</span> and draw the object in <span class="function">display()</span>.</p>
<div class="source-code">
  <a class="toggle" href="#" data-to-raw='Show Raw' data-to-formatted='Show Formatted'>Show Raw</a>
  <textarea>  void update() {
    // The Mover moves.
    location.add(velocity);
  }

  void display() {
    stroke(0);
    fill(175);
    // The Mover is displayed.
    ellipse(location.x,location.y,16,16);
  }

}</textarea>
  
  
  
  <div class="code-block">

  <div class='code-comment-pair no-comment'><code><pre><span class='one-line'>  <span class="kt">void</span> <span class="nf">update</span><span class="o">()</span> <span class="o">{</span></span></pre></code></div>

  <div class='code-comment-pair '><div class='code-comment '>The Mover moves.</div><code><pre><span class='one-line'>    <span class="n">location</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">velocity</span><span class="o">);</span></span>
<span class='one-line'>  <span class="o">}</span></span>
<span class='one-line'> </span>
<span class='one-line'>  <span class="kt">void</span> <span class="nf">display</span><span class="o">()</span> <span class="o">{</span></span>
<span class='one-line'>    <span class="n">stroke</span><span class="o">(</span><span class="mi">0</span><span class="o">);</span></span>
<span class='one-line'>    <span class="n">fill</span><span class="o">(</span><span class="mi">175</span><span class="o">);</span></span></pre></code></div>

  <div class='code-comment-pair '><div class='code-comment '>The Mover is displayed.</div><code><pre><span class='one-line'>    <span class="n">ellipse</span><span class="o">(</span><span class="n">location</span><span class="o">.</span><span class="na">x</span><span class="o">,</span><span class="n">location</span><span class="o">.</span><span class="na">y</span><span class="o">,</span><span class="mi">16</span><span class="o">,</span><span class="mi">16</span><span class="o">);</span></span>
<span class='one-line'>  <span class="o">}</span></span>
<span class='one-line'> </span>
<span class='one-line'><span class="o">}</span></span></pre></code></div>

</div>
  <div style="position: relative;clear:both;display:block;height:1px;width:100%;"></div>
</div><p><a id="class-processingconstructor-8212f920-253f-0130-baa9-7cd1c3f718ad" style="display: block;"></a><a id="constructor-82131490-253f-0130-baaa-7cd1c3f718ad" style="display: block;"></a></p>
<p>We’ve forgotten one crucial item, however: the object’s <strong><em>constructor</em></strong>.  The constructor is a special function inside of a class that creates the instance of the object itself. It is where you give instructions on how to set up the object.  It always has the same name as the class and is called by invoking the <strong><em>new</em></strong> operator:</p>
<div class="source-code">
  <a class="toggle" href="#" data-to-raw='Show Raw' data-to-formatted='Show Formatted'>Show Raw</a>
  <textarea>  Mover m = new Mover();</textarea>
  
  
  
  <div class="code-block">

  <div class='code-comment-pair no-comment'><code><pre><span class='one-line'>  <span class="n">Mover</span> <span class="n">m</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Mover</span><span class="o">();</span></span></pre></code></div>

</div>
  <div style="position: relative;clear:both;display:block;height:1px;width:100%;"></div>
</div><p>In our case, let’s arbitrarily decide to initialize our <span class="klass">Mover</span> object by giving it a random location and a random velocity.</p>
<div class="source-code">
  <a class="toggle" href="#" data-to-raw='Show Raw' data-to-formatted='Show Formatted'>Show Raw</a>
  <textarea>  Mover() {
    location = new PVector(random(width),random(height));
    velocity = new PVector(random(-2,2),random(-2,2));
  }</textarea>
  
  
  
  <div class="code-block">

  <div class='code-comment-pair no-comment'><code><pre><span class='one-line'>  <span class="n">Mover</span><span class="o">()</span> <span class="o">{</span></span>
<span class='one-line'>    <span class="n">location</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PVector</span><span class="o">(</span><span class="n">random</span><span class="o">(</span><span class="n">width</span><span class="o">),</span><span class="n">random</span><span class="o">(</span><span class="n">height</span><span class="o">));</span></span>
<span class='one-line'>    <span class="n">velocity</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PVector</span><span class="o">(</span><span class="n">random</span><span class="o">(-</span><span class="mi">2</span><span class="o">,</span><span class="mi">2</span><span class="o">),</span><span class="n">random</span><span class="o">(-</span><span class="mi">2</span><span class="o">,</span><span class="mi">2</span><span class="o">));</span></span>
<span class='one-line'>  <span class="o">}</span></span></pre></code></div>

</div>
  <div style="position: relative;clear:both;display:block;height:1px;width:100%;"></div>
</div><p>If object-oriented programming is at all new to you, one aspect here may seem a bit confusing.  After all, we spent the beginning of this chapter discussing the <span class="klass">PVector</span> class.  The <span class="klass">PVector</span> class is the template for making the <span class="klass">location</span> object and the <span class="klass">velocity</span> object.  So what are they doing inside of yet another object, the <span class="klass">Mover</span> object?   In fact, this is just about the most normal thing ever.  An object is simply something that holds data (and functionality).  That data can be numbers (integers, floats, etc.) or other objects!  We’ll see this over and over again in this book.   For example, in <a href="#chapter04_section1">Chapter 4</a> we’ll write a class to describe a system of particles.  That <span class="klass">ParticleSystem</span> object will have as its data a list of <span class="klass">Particle</span> objects…and each <span class="klass">Particle</span> object will have as its data several <span class="klass">PVector</span> objects!</p>
<p>Let’s finish off the <span class="klass">Mover</span> class by incorporating a function to determine what the object should do when it reaches the edge of the window.  For now let’s do something simple, and just have it wrap around the edges.</p>
<div class="source-code">
  <a class="toggle" href="#" data-to-raw='Show Raw' data-to-formatted='Show Formatted'>Show Raw</a>
  <textarea>  void checkEdges() {

    //[full] When it reaches one edge, set location to the other.
    if (location.x > width) {
      location.x = 0;
    } else if (location.x < 0) {
      location.x = width;
    }

    if (location.y > height) {
      location.y = 0;
    } else if (location.y < 0) {
      location.y = height;
    }
    //[end]

  }</textarea>
  
  
  
  <div class="code-block">

  <div class='code-comment-pair no-comment'><code><pre><span class='one-line'>  <span class="kt">void</span> <span class="nf">checkEdges</span><span class="o">()</span> <span class="o">{</span></span>
<span class='one-line'> </span></pre></code></div>

  <div class='code-comment-pair stretch'><div class='code-comment stretch'> When it reaches one edge, set location to the other.</div><code><pre><span class='one-line'>    <span class="k">if</span> <span class="o">(</span><span class="n">location</span><span class="o">.</span><span class="na">x</span> <span class="o">&gt;</span> <span class="n">width</span><span class="o">)</span> <span class="o">{</span></span>
<span class='one-line'>      <span class="n">location</span><span class="o">.</span><span class="na">x</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span></span>
<span class='one-line'>    <span class="o">}</span> <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">location</span><span class="o">.</span><span class="na">x</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span></span>
<span class='one-line'>      <span class="n">location</span><span class="o">.</span><span class="na">x</span> <span class="o">=</span> <span class="n">width</span><span class="o">;</span></span>
<span class='one-line'>    <span class="o">}</span></span>
<span class='one-line'> </span>
<span class='one-line'>    <span class="k">if</span> <span class="o">(</span><span class="n">location</span><span class="o">.</span><span class="na">y</span> <span class="o">&gt;</span> <span class="n">height</span><span class="o">)</span> <span class="o">{</span></span>
<span class='one-line'>      <span class="n">location</span><span class="o">.</span><span class="na">y</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span></span>
<span class='one-line'>    <span class="o">}</span> <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">location</span><span class="o">.</span><span class="na">y</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span></span>
<span class='one-line'>      <span class="n">location</span><span class="o">.</span><span class="na">y</span> <span class="o">=</span> <span class="n">height</span><span class="o">;</span></span>
<span class='one-line'>    <span class="o">}</span></span></pre></code><div style='position:relative;clear:both;display:block;height:1px;width:100%;'></div></div>

  <div class='code-comment-pair no-comment'><code><pre><span class='one-line'> </span>
<span class='one-line'>  <span class="o">}</span></span></pre></code></div>

</div>
  <div style="position: relative;clear:both;display:block;height:1px;width:100%;"></div>
</div><p>Now that the <span class="klass">Mover</span> class is finished, we can look at what we need to do in our main program.  We first declare a <span class="klass">Mover</span> object:</p>
<div class="source-code">
  <a class="toggle" href="#" data-to-raw='Show Raw' data-to-formatted='Show Formatted'>Show Raw</a>
  <textarea>Mover mover;</textarea>
  
  
  
  <div class="code-block">

  <div class='code-comment-pair no-comment'><code><pre><span class='one-line'><span class="n">Mover</span> <span class="n">mover</span><span class="o">;</span></span></pre></code></div>

</div>
  <div style="position: relative;clear:both;display:block;height:1px;width:100%;"></div>
</div><p>Then initialize the mover in <span class="function">setup()</span>:</p>
<div class="source-code">
  <a class="toggle" href="#" data-to-raw='Show Raw' data-to-formatted='Show Formatted'>Show Raw</a>
  <textarea>mover = new Mover();</textarea>
  
  
  
  <div class="code-block">

  <div class='code-comment-pair no-comment'><code><pre><span class='one-line'><span class="n">mover</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Mover</span><span class="o">();</span></span></pre></code></div>

</div>
  <div style="position: relative;clear:both;display:block;height:1px;width:100%;"></div>
</div><p>and call the appropriate functions in <span class="function">draw()</span>:</p>
<div class="source-code">
  <a class="toggle" href="#" data-to-raw='Show Raw' data-to-formatted='Show Formatted'>Show Raw</a>
  <textarea>mover.update();
mover.checkEdges();
mover.display();</textarea>
  
  
  
  <div class="code-block">

  <div class='code-comment-pair no-comment'><code><pre><span class='one-line'><span class="n">mover</span><span class="o">.</span><span class="na">update</span><span class="o">();</span></span>
<span class='one-line'><span class="n">mover</span><span class="o">.</span><span class="na">checkEdges</span><span class="o">();</span></span>
<span class='one-line'><span class="n">mover</span><span class="o">.</span><span class="na">display</span><span class="o">();</span></span></pre></code></div>

</div>
  <div style="position: relative;clear:both;display:block;height:1px;width:100%;"></div>
</div><p>Here is the entire example for reference:</p>
<div class="image-container screenshot" >
	
	<canvas data-processing-sources="/book/processingjs/chapter01/_1_7_motion101/_1_7_motion101.pde /book/processingjs/chapter01/_1_7_motion101/Mover.pde" class="screenshot">
		<p>Your browser does not support the canvas tag.</p>
	</canvas>
  <div class="sketch-controls">
    <button class="reset">RESET</button>
    <button class="pause">PAUSE</button>
  </div>
	
	
</div>
<p><a id="chapter01_example7" style="display: block;"></a><span class="example">Example 1.7: Motion 101 (velocity)</span></p>
<div class="source-code">
  <a class="toggle" href="#" data-to-raw='Show Raw' data-to-formatted='Show Formatted'>Show Raw</a>
  <textarea>// Declare Mover object.
Mover mover;

void setup() {
  size(640,360);
  // Create Mover object.
  mover = new Mover();
}

void draw() {
  background(255);

  //[full] Call functions on Mover object.
  mover.update();
  mover.checkEdges();
  mover.display();
  //[end]
}

class Mover {

  //[full] Our object has two PVectors: location and velocity.
  PVector location;
  PVector velocity;
  //[end]

  Mover() {
    location = new PVector(random(width),random(height));
    velocity = new PVector(random(-2,2),random(-2,2));
  }

  void update() {
    // Motion 101: Location changes by velocity.
    location.add(velocity);
  }

  void display() {
    stroke(0);
    fill(175);
    ellipse(location.x,location.y,16,16);
  }

  void checkEdges() {
    if (location.x > width) {
      location.x = 0;
    } else if (location.x < 0) {
      location.x = width;
    }

    if (location.y > height) {
      location.y = 0;
    } else if (location.y < 0) {
      location.y = height;
    }
  }
}</textarea>
  
  
  
  <div class="code-block">

  <div class='code-comment-pair '><div class='code-comment '>Declare Mover object.</div><code><pre><span class='one-line'><span class="n">Mover</span> <span class="n">mover</span><span class="o">;</span></span>
<span class='one-line'> </span>
<span class='one-line'><span class="kt">void</span> <span class="nf">setup</span><span class="o">()</span> <span class="o">{</span></span>
<span class='one-line'>  <span class="n">size</span><span class="o">(</span><span class="mi">640</span><span class="o">,</span><span class="mi">360</span><span class="o">);</span></span></pre></code></div>

  <div class='code-comment-pair '><div class='code-comment '>Create Mover object.</div><code><pre><span class='one-line'>  <span class="n">mover</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Mover</span><span class="o">();</span></span>
<span class='one-line'><span class="o">}</span></span>
<span class='one-line'> </span>
<span class='one-line'><span class="kt">void</span> <span class="nf">draw</span><span class="o">()</span> <span class="o">{</span></span>
<span class='one-line'>  <span class="n">background</span><span class="o">(</span><span class="mi">255</span><span class="o">);</span></span>
<span class='one-line'> </span></pre></code></div>

  <div class='code-comment-pair stretch'><div class='code-comment stretch'> Call functions on Mover object.</div><code><pre><span class='one-line'>  <span class="n">mover</span><span class="o">.</span><span class="na">update</span><span class="o">();</span></span>
<span class='one-line'>  <span class="n">mover</span><span class="o">.</span><span class="na">checkEdges</span><span class="o">();</span></span>
<span class='one-line'>  <span class="n">mover</span><span class="o">.</span><span class="na">display</span><span class="o">();</span></span></pre></code><div style='position:relative;clear:both;display:block;height:1px;width:100%;'></div></div>

  <div class='code-comment-pair no-comment'><code><pre><span class='one-line'><span class="o">}</span></span>
<span class='one-line'> </span>
<span class='one-line'><span class="kd">class</span> <span class="nc">Mover</span> <span class="o">{</span></span>
<span class='one-line'> </span></pre></code></div>

  <div class='code-comment-pair stretch'><div class='code-comment stretch'> Our object has two PVectors: location and velocity.</div><code><pre><span class='one-line'>  <span class="n">PVector</span> <span class="n">location</span><span class="o">;</span></span>
<span class='one-line'>  <span class="n">PVector</span> <span class="n">velocity</span><span class="o">;</span></span></pre></code><div style='position:relative;clear:both;display:block;height:1px;width:100%;'></div></div>

  <div class='code-comment-pair no-comment'><code><pre><span class='one-line'> </span>
<span class='one-line'>  <span class="n">Mover</span><span class="o">()</span> <span class="o">{</span></span>
<span class='one-line'>    <span class="n">location</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PVector</span><span class="o">(</span><span class="n">random</span><span class="o">(</span><span class="n">width</span><span class="o">),</span><span class="n">random</span><span class="o">(</span><span class="n">height</span><span class="o">));</span></span>
<span class='one-line'>    <span class="n">velocity</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PVector</span><span class="o">(</span><span class="n">random</span><span class="o">(-</span><span class="mi">2</span><span class="o">,</span><span class="mi">2</span><span class="o">),</span><span class="n">random</span><span class="o">(-</span><span class="mi">2</span><span class="o">,</span><span class="mi">2</span><span class="o">));</span></span>
<span class='one-line'>  <span class="o">}</span></span>
<span class='one-line'> </span>
<span class='one-line'>  <span class="kt">void</span> <span class="nf">update</span><span class="o">()</span> <span class="o">{</span></span></pre></code></div>

  <div class='code-comment-pair '><div class='code-comment '>Motion 101: Location changes by velocity.</div><code><pre><span class='one-line'>    <span class="n">location</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">velocity</span><span class="o">);</span></span>
<span class='one-line'>  <span class="o">}</span></span>
<span class='one-line'> </span>
<span class='one-line'>  <span class="kt">void</span> <span class="nf">display</span><span class="o">()</span> <span class="o">{</span></span>
<span class='one-line'>    <span class="n">stroke</span><span class="o">(</span><span class="mi">0</span><span class="o">);</span></span>
<span class='one-line'>    <span class="n">fill</span><span class="o">(</span><span class="mi">175</span><span class="o">);</span></span>
<span class='one-line'>    <span class="n">ellipse</span><span class="o">(</span><span class="n">location</span><span class="o">.</span><span class="na">x</span><span class="o">,</span><span class="n">location</span><span class="o">.</span><span class="na">y</span><span class="o">,</span><span class="mi">16</span><span class="o">,</span><span class="mi">16</span><span class="o">);</span></span>
<span class='one-line'>  <span class="o">}</span></span>
<span class='one-line'> </span>
<span class='one-line'>  <span class="kt">void</span> <span class="nf">checkEdges</span><span class="o">()</span> <span class="o">{</span></span>
<span class='one-line'>    <span class="k">if</span> <span class="o">(</span><span class="n">location</span><span class="o">.</span><span class="na">x</span> <span class="o">&gt;</span> <span class="n">width</span><span class="o">)</span> <span class="o">{</span></span>
<span class='one-line'>      <span class="n">location</span><span class="o">.</span><span class="na">x</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span></span>
<span class='one-line'>    <span class="o">}</span> <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">location</span><span class="o">.</span><span class="na">x</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span></span>
<span class='one-line'>      <span class="n">location</span><span class="o">.</span><span class="na">x</span> <span class="o">=</span> <span class="n">width</span><span class="o">;</span></span>
<span class='one-line'>    <span class="o">}</span></span>
<span class='one-line'> </span>
<span class='one-line'>    <span class="k">if</span> <span class="o">(</span><span class="n">location</span><span class="o">.</span><span class="na">y</span> <span class="o">&gt;</span> <span class="n">height</span><span class="o">)</span> <span class="o">{</span></span>
<span class='one-line'>      <span class="n">location</span><span class="o">.</span><span class="na">y</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span></span>
<span class='one-line'>    <span class="o">}</span> <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">location</span><span class="o">.</span><span class="na">y</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span></span>
<span class='one-line'>      <span class="n">location</span><span class="o">.</span><span class="na">y</span> <span class="o">=</span> <span class="n">height</span><span class="o">;</span></span>
<span class='one-line'>    <span class="o">}</span></span>
<span class='one-line'>  <span class="o">}</span></span>
<span class='one-line'><span class="o">}</span></span></pre></code></div>

</div>
  <div style="position: relative;clear:both;display:block;height:1px;width:100%;"></div>
</div></section><section><a id="chapter01_section8" style="display: block;"></a><h3 id="18-vector-motion-acceleration">1.8 Vector Motion: Acceleration</h3><p><a id="acceleration-82141280-253f-0130-baab-7cd1c3f718ad" style="display: block;"></a><a id="vectorsacceleration-82142310-253f-0130-baac-7cd1c3f718ad" style="display: block;"></a><a id="velocityacceleration-82143490-253f-0130-baad-7cd1c3f718ad" style="display: block;"></a></p>
<p>OK. At this point, we should feel comfortable with two things: (1) what a <span class="klass">PVector</span> is and (2) how we use <span class="klass">PVector</span>s inside of an object to keep track of its location and movement.  This is an excellent first step and deserves a mild round of applause.   Before standing ovations and screaming fans, however, we need to make one more, somewhat bigger step forward.   After all, watching the Motion 101 example is fairly boring—the circle never speeds up, never slows down, and never turns.  For more interesting motion, for motion that appears in the real world around us, we need to add one more <span class="klass">PVector</span> to our class—<span class="var">acceleration</span>.</p>
<p>The strict definition of <strong><em>acceleration</em></strong> we’re using here is: <em>the rate of change of velocity</em>.  Let’s think about that definition for a moment.  Is this a new concept?  Not really.  Velocity is defined as <em>the rate of change of location</em>.  In essence, we are developing a “trickle-down” effect.  Acceleration affects velocity, which in turn affects location (for some brief foreshadowing, this point will become even more crucial in the next chapter, when we see how forces affect acceleration, which affects velocity, which affects location).  In code, this reads:</p>
<div class="source-code">
  <a class="toggle" href="#" data-to-raw='Show Raw' data-to-formatted='Show Formatted'>Show Raw</a>
  <textarea>velocity.add(acceleration);
location.add(velocity);</textarea>
  
  
  
  <div class="code-block">

  <div class='code-comment-pair no-comment'><code><pre><span class='one-line'><span class="n">velocity</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">acceleration</span><span class="o">);</span></span>
<span class='one-line'><span class="n">location</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">velocity</span><span class="o">);</span></span></pre></code></div>

</div>
  <div style="position: relative;clear:both;display:block;height:1px;width:100%;"></div>
</div><p>As an exercise, from this point forward, let’s make a rule for ourselves.  Let’s write every example in the rest of this book without ever touching the value of velocity and location (except to initialize them).  In other words, our goal now for programming motion is: Come up with an algorithm for how we calculate acceleration and let the trickle-down effect work its magic.   (In truth, you’ll find reasons to break this rule, but it’s important to illustrate the principles behind our motion algorithm.)  And so we need to come up with some ways to calculate acceleration:</p>
<section><a id="_acceleration_algorithms" style="display: block;"></a><h4 id="acceleration-algorithms">Acceleration Algorithms!</h4><p><a id="accelerationalgorithms-for-8214c4c0-253f-0130-baae-7cd1c3f718ad" style="display: block;"></a><a id="acceleration-algorithms-8214e3d0-253f-0130-baaf-7cd1c3f718ad" style="display: block;"></a></p>
<div class="list">
	
	<ol class="arabic">
		
			<li><p><em>A constant acceleration</em></p>
</li>
		
			<li><p><em>A totally random acceleration</em></p>
</li>
		
			<li><p><em>Acceleration towards the mouse</em></p>
</li>
		
	</ol>
</div><p><a id="acceleration-algorithmsconstant-82152950-253f-0130-bab0-7cd1c3f718ad" style="display: block;"></a></p>
<p>Algorithm #1, <em>a constant acceleration</em>, is not particularly interesting, but it is the simplest and will help us begin incorporating acceleration into our code.   The first thing we need to do is add another <span class="klass">PVector</span> to the <span class="klass">Mover</span> class:</p>
<div class="source-code">
  <a class="toggle" href="#" data-to-raw='Show Raw' data-to-formatted='Show Formatted'>Show Raw</a>
  <textarea>class Mover {

  PVector location;
  PVector velocity;
  // A new PVector for acceleration
  PVector acceleration;  //[bold]</textarea>
  
  
  
  <div class="code-block">

  <div class='code-comment-pair no-comment'><code><pre><span class='one-line'><span class="kd">class</span> <span class="nc">Mover</span> <span class="o">{</span></span>
<span class='one-line'> </span>
<span class='one-line'>  <span class="n">PVector</span> <span class="n">location</span><span class="o">;</span></span>
<span class='one-line'>  <span class="n">PVector</span> <span class="n">velocity</span><span class="o">;</span></span></pre></code></div>

  <div class='code-comment-pair '><div class='code-comment '>A new PVector for acceleration</div><code><pre><span class='one-line'>  <strong><span class="n">PVector</span> <span class="n">acceleration</span><span class="o">;</span></strong></span></pre></code></div>

</div>
  <div style="position: relative;clear:both;display:block;height:1px;width:100%;"></div>
</div><p>And incorporate acceleration into the <span class="function">update()</span> function:</p>
<div class="source-code">
  <a class="toggle" href="#" data-to-raw='Show Raw' data-to-formatted='Show Formatted'>Show Raw</a>
  <textarea> void update() {
    //[full] Our motion algorithm is now two lines of code!
    velocity.add(acceleration); //[bold]
    location.add(velocity);
    //[end]
 }</textarea>
  
  
  
  <div class="code-block">

  <div class='code-comment-pair no-comment'><code><pre><span class='one-line'> <span class="kt">void</span> <span class="nf">update</span><span class="o">()</span> <span class="o">{</span></span></pre></code></div>

  <div class='code-comment-pair stretch'><div class='code-comment stretch'> Our motion algorithm is now two lines of code!</div><code><pre><span class='one-line'>    <strong><span class="n">velocity</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">acceleration</span><span class="o">);</span></strong></span>
<span class='one-line'>    <span class="n">location</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">velocity</span><span class="o">);</span></span></pre></code><div style='position:relative;clear:both;display:block;height:1px;width:100%;'></div></div>

  <div class='code-comment-pair no-comment'><code><pre><span class='one-line'> <span class="o">}</span></span></pre></code></div>

</div>
  <div style="position: relative;clear:both;display:block;height:1px;width:100%;"></div>
</div><p>We’re almost done.  The only missing piece is initialization in the constructor.</p>
<div class="source-code">
  <a class="toggle" href="#" data-to-raw='Show Raw' data-to-formatted='Show Formatted'>Show Raw</a>
  <textarea>  Mover() {</textarea>
  
  
  
  <div class="code-block">

  <div class='code-comment-pair no-comment'><code><pre><span class='one-line'>  <span class="n">Mover</span><span class="o">()</span> <span class="o">{</span></span></pre></code></div>

</div>
  <div style="position: relative;clear:both;display:block;height:1px;width:100%;"></div>
</div><p>Let’s start the <span class="klass">Mover</span> object in the middle of the window…</p>
<div class="source-code">
  <a class="toggle" href="#" data-to-raw='Show Raw' data-to-formatted='Show Formatted'>Show Raw</a>
  <textarea>    location = new PVector(width/2,height/2);</textarea>
  
  
  
  <div class="code-block">

  <div class='code-comment-pair no-comment'><code><pre><span class='one-line'>    <span class="n">location</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PVector</span><span class="o">(</span><span class="n">width</span><span class="o">/</span><span class="mi">2</span><span class="o">,</span><span class="n">height</span><span class="o">/</span><span class="mi">2</span><span class="o">);</span></span></pre></code></div>

</div>
  <div style="position: relative;clear:both;display:block;height:1px;width:100%;"></div>
</div><p>…with an initial velocity of zero.</p>
<div class="source-code">
  <a class="toggle" href="#" data-to-raw='Show Raw' data-to-formatted='Show Formatted'>Show Raw</a>
  <textarea>    velocity = new PVector(0,0);</textarea>
  
  
  
  <div class="code-block">

  <div class='code-comment-pair no-comment'><code><pre><span class='one-line'>    <span class="n">velocity</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PVector</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span><span class="mi">0</span><span class="o">);</span></span></pre></code></div>

</div>
  <div style="position: relative;clear:both;display:block;height:1px;width:100%;"></div>
</div><p>This means that when the sketch starts, the object is at rest.  We don’t have to worry about velocity anymore, as we are controlling the object’s motion entirely with acceleration.  Speaking of which, according to Algorithm #1, our first sketch involves constant acceleration.  So let’s pick a value.</p>
<div class="source-code">
  <a class="toggle" href="#" data-to-raw='Show Raw' data-to-formatted='Show Formatted'>Show Raw</a>
  <textarea>    acceleration = new PVector(-0.001,0.01);
  }</textarea>
  
  
  
  <div class="code-block">

  <div class='code-comment-pair no-comment'><code><pre><span class='one-line'>    <span class="n">acceleration</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PVector</span><span class="o">(-</span><span class="mf">0.001</span><span class="o">,</span><span class="mf">0.01</span><span class="o">);</span></span>
<span class='one-line'>  <span class="o">}</span></span></pre></code></div>

</div>
  <div style="position: relative;clear:both;display:block;height:1px;width:100%;"></div>
</div><p>Maybe you’re thinking, “Gosh, those values seem awfully small!”   That’s right, they are quite tiny.  It’s important to realize that our acceleration values (measured in pixels) accumulate over time in the velocity, about thirty times per second depending on our sketch’s frame rate.   And so to keep the magnitude of the velocity vector within a reasonable range, our acceleration values should remain quite small.   We can also help this cause by incorporating the <span class="klass">PVector</span> function <span class="function">limit()</span>.</p>
<p><a id="limit-function-pvector-class-8215de60-253f-0130-bab1-7cd1c3f718ad" style="display: block;"></a><a id="magnitude-of-vectorslimiting-8215f7a0-253f-0130-bab2-7cd1c3f718ad" style="display: block;"></a><a id="pvector-class-processinglimit-function-82161460-253f-0130-bab3-7cd1c3f718ad" style="display: block;"></a><a id="velocitylimiting-821631c0-253f-0130-bab4-7cd1c3f718ad" style="display: block;"></a></p>
<div class="source-code">
  <a class="toggle" href="#" data-to-raw='Show Raw' data-to-formatted='Show Formatted'>Show Raw</a>
  <textarea>// The limit() function constrains the magnitude of a vector.
velocity.limit(10);</textarea>
  
  
  
  <div class="code-block">

  <div class='code-comment-pair '><div class='code-comment '>The limit() function constrains the magnitude of a vector.</div><code><pre><span class='one-line'><span class="n">velocity</span><span class="o">.</span><span class="na">limit</span><span class="o">(</span><span class="mi">10</span><span class="o">);</span></span></pre></code></div>

</div>
  <div style="position: relative;clear:both;display:block;height:1px;width:100%;"></div>
</div><p>This translates to the following:</p>
<p><em>What is the magnitude of velocity?  If it’s less than 10, no worries; just leave it as is.  If it’s more than 10, however, reduce it to 10!</em></p>
<div class="example">
  <a id="chapter01_exercise4" style="display: block;"></a><h5 id="exercise-14">Exercise 1.4</h5><p>Write the <span class="function">limit()</span> function for the <span class="klass">PVector</span> class.</p>
<div class="source-code">
  <a class="toggle" href="#" data-to-raw='Show Raw' data-to-formatted='Show Formatted'>Show Raw</a>
  <textarea>  void limit(float max) {
    if (_______ > _______) {
      _________();
      ____(max);
    }
  }</textarea>
  
  
  
  <div class="code-block">

  <div class='code-comment-pair no-comment'><code><pre><span class='one-line'>  <span class="kt">void</span> <span class="nf">limit</span><span class="o">(</span><span class="kt">float</span> <span class="n">max</span><span class="o">)</span> <span class="o">{</span></span>
<span class='one-line'>    <span class="k">if</span> <span class="o">(</span><span class="n">_______</span> <span class="o">&gt;</span> <span class="n">_______</span><span class="o">)</span> <span class="o">{</span></span>
<span class='one-line'>      <span class="n">_________</span><span class="o">();</span></span>
<span class='one-line'>      <span class="n">____</span><span class="o">(</span><span class="n">max</span><span class="o">);</span></span>
<span class='one-line'>    <span class="o">}</span></span>
<span class='one-line'>  <span class="o">}</span></span></pre></code></div>

</div>
  <div style="position: relative;clear:both;display:block;height:1px;width:100%;"></div>
</div>
</div><p>Let’s take a look at the changes to the <span class="klass">Mover</span> class, complete with <span class="function">acceleration</span> and <span class="function">limit()</span>.</p>
<div class="image-container screenshot" >
	
	<canvas data-processing-sources="/book/processingjs/chapter01/_1_8_motion101_acceleration/_1_8_motion101_acceleration.pde /book/processingjs/chapter01/_1_8_motion101_acceleration/Mover.pde" class="screenshot">
		<p>Your browser does not support the canvas tag.</p>
	</canvas>
  <div class="sketch-controls">
    <button class="reset">RESET</button>
    <button class="pause">PAUSE</button>
  </div>
	
	
</div>
<p><a id="chapter01_example8" style="display: block;"></a><span class="example">Example 1.8: Motion 101 (velocity and constant acceleration)</span></p>
<div class="source-code">
  <a class="toggle" href="#" data-to-raw='Show Raw' data-to-formatted='Show Formatted'>Show Raw</a>
  <textarea>class Mover {

  PVector location;
  PVector velocity;
  // Acceleration is the key!
  PVector acceleration;
  // The variable topspeed will limit the magnitude of velocity.
  float topspeed;

  Mover() {
    location = new PVector(width/2,height/2);
    velocity = new PVector(0,0);
    acceleration = new PVector(-0.001,0.01);
    topspeed = 10;
  }

  void update() {
    //[full] Velocity changes by acceleration and is limited by topspeed.
    velocity.add(acceleration);
    velocity.limit(topspeed);
    //[end]
    location.add(velocity);
  }

  // display() is the same.
  void display() {}
  // checkEdges() is the same.
  void checkEdges() {}
}</textarea>
  
  
  
  <div class="code-block">

  <div class='code-comment-pair no-comment'><code><pre><span class='one-line'><span class="kd">class</span> <span class="nc">Mover</span> <span class="o">{</span></span>
<span class='one-line'> </span>
<span class='one-line'>  <span class="n">PVector</span> <span class="n">location</span><span class="o">;</span></span>
<span class='one-line'>  <span class="n">PVector</span> <span class="n">velocity</span><span class="o">;</span></span></pre></code></div>

  <div class='code-comment-pair '><div class='code-comment '>Acceleration is the key!</div><code><pre><span class='one-line'>  <span class="n">PVector</span> <span class="n">acceleration</span><span class="o">;</span></span></pre></code></div>

  <div class='code-comment-pair '><div class='code-comment '>The variable topspeed will limit the magnitude of velocity.</div><code><pre><span class='one-line'>  <span class="kt">float</span> <span class="n">topspeed</span><span class="o">;</span></span>
<span class='one-line'> </span>
<span class='one-line'>  <span class="n">Mover</span><span class="o">()</span> <span class="o">{</span></span>
<span class='one-line'>    <span class="n">location</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PVector</span><span class="o">(</span><span class="n">width</span><span class="o">/</span><span class="mi">2</span><span class="o">,</span><span class="n">height</span><span class="o">/</span><span class="mi">2</span><span class="o">);</span></span>
<span class='one-line'>    <span class="n">velocity</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PVector</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span><span class="mi">0</span><span class="o">);</span></span>
<span class='one-line'>    <span class="n">acceleration</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PVector</span><span class="o">(-</span><span class="mf">0.001</span><span class="o">,</span><span class="mf">0.01</span><span class="o">);</span></span>
<span class='one-line'>    <span class="n">topspeed</span> <span class="o">=</span> <span class="mi">10</span><span class="o">;</span></span>
<span class='one-line'>  <span class="o">}</span></span>
<span class='one-line'> </span>
<span class='one-line'>  <span class="kt">void</span> <span class="nf">update</span><span class="o">()</span> <span class="o">{</span></span></pre></code></div>

  <div class='code-comment-pair stretch'><div class='code-comment stretch'> Velocity changes by acceleration and is limited by topspeed.</div><code><pre><span class='one-line'>    <span class="n">velocity</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">acceleration</span><span class="o">);</span></span>
<span class='one-line'>    <span class="n">velocity</span><span class="o">.</span><span class="na">limit</span><span class="o">(</span><span class="n">topspeed</span><span class="o">);</span></span></pre></code><div style='position:relative;clear:both;display:block;height:1px;width:100%;'></div></div>

  <div class='code-comment-pair no-comment'><code><pre><span class='one-line'>    <span class="n">location</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">velocity</span><span class="o">);</span></span>
<span class='one-line'>  <span class="o">}</span></span>
<span class='one-line'> </span></pre></code></div>

  <div class='code-comment-pair '><div class='code-comment '>display() is the same.</div><code><pre><span class='one-line'>  <span class="kt">void</span> <span class="nf">display</span><span class="o">()</span> <span class="o">{}</span></span></pre></code></div>

  <div class='code-comment-pair '><div class='code-comment '>checkEdges() is the same.</div><code><pre><span class='one-line'>  <span class="kt">void</span> <span class="nf">checkEdges</span><span class="o">()</span> <span class="o">{}</span></span>
<span class='one-line'><span class="o">}</span></span></pre></code></div>

</div>
  <div style="position: relative;clear:both;display:block;height:1px;width:100%;"></div>
</div><div class="example">
  <a id="chapter01_exercise5" style="display: block;"></a><h5 id="exercise-15">Exercise 1.5</h5><p>Create a simulation of a car (or runner) that accelerates when you press the up key and brakes when you press the down key.</p>

</div><p><a id="acceleration-algorithmsrandom-821883d0-253f-0130-bab5-7cd1c3f718ad" style="display: block;"></a></p>
<p>Now on to Algorithm #2, <em>a totally random acceleration</em>.  In this case, instead of initializing acceleration in the object’s constructor, we want to pick a new acceleration each cycle, i.e. each time <span class="function">update()</span> is called.</p>
<div class="image-container screenshot" >
	
	<canvas data-processing-sources="/book/processingjs/chapter01/_1_9_motion101_acceleration/_1_9_motion101_acceleration.pde /book/processingjs/chapter01/_1_9_motion101_acceleration/Mover.pde" class="screenshot">
		<p>Your browser does not support the canvas tag.</p>
	</canvas>
  <div class="sketch-controls">
    <button class="reset">RESET</button>
    <button class="pause">PAUSE</button>
  </div>
	
	
</div>
<p><a id="chapter01_example9" style="display: block;"></a><span class="example">Example 1.9: Motion 101 (velocity and random acceleration)</span></p>
<div class="source-code">
  <a class="toggle" href="#" data-to-raw='Show Raw' data-to-formatted='Show Formatted'>Show Raw</a>
  <textarea>  void update() {

    // The random2D() function will give us a PVector of length 1 pointing in a random direction.
    acceleration = PVector.random2D();

    velocity.add(acceleration);
    velocity.limit(topspeed);
    location.add(velocity);
  }</textarea>
  
  
  
  <div class="code-block">

  <div class='code-comment-pair no-comment'><code><pre><span class='one-line'>  <span class="kt">void</span> <span class="nf">update</span><span class="o">()</span> <span class="o">{</span></span>
<span class='one-line'> </span></pre></code></div>

  <div class='code-comment-pair '><div class='code-comment '>The random2D() function will give us a PVector of length 1 pointing in a random direction.</div><code><pre><span class='one-line'>    <span class="n">acceleration</span> <span class="o">=</span> <span class="n">PVector</span><span class="o">.</span><span class="na">random2D</span><span class="o">();</span></span>
<span class='one-line'> </span>
<span class='one-line'>    <span class="n">velocity</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">acceleration</span><span class="o">);</span></span>
<span class='one-line'>    <span class="n">velocity</span><span class="o">.</span><span class="na">limit</span><span class="o">(</span><span class="n">topspeed</span><span class="o">);</span></span>
<span class='one-line'>    <span class="n">location</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">velocity</span><span class="o">);</span></span>
<span class='one-line'>  <span class="o">}</span></span></pre></code></div>

</div>
  <div style="position: relative;clear:both;display:block;height:1px;width:100%;"></div>
</div><p>Because the random vector is a normalized one, we can try scaling it:</p>
(a) scaling the acceleration to a constant value<div class="source-code">
  <a class="toggle" href="#" data-to-raw='Show Raw' data-to-formatted='Show Formatted'>Show Raw</a>
  <textarea>acceleration = PVector.random2D();
// Constant
acceleration.mult(0.5); //[bold]</textarea>
  
  
  
  <div class="code-block">

  <div class='code-comment-pair no-comment'><code><pre><span class='one-line'><span class="n">acceleration</span> <span class="o">=</span> <span class="n">PVector</span><span class="o">.</span><span class="na">random2D</span><span class="o">();</span></span></pre></code></div>

  <div class='code-comment-pair '><div class='code-comment '>Constant</div><code><pre><span class='one-line'><strong><span class="n">acceleration</span><span class="o">.</span><span class="na">mult</span><span class="o">(</span><span class="mf">0.5</span><span class="o">);</span></strong></span></pre></code></div>

</div>
  <div style="position: relative;clear:both;display:block;height:1px;width:100%;"></div>
</div>(b) scaling the acceleration to a random value<div class="source-code">
  <a class="toggle" href="#" data-to-raw='Show Raw' data-to-formatted='Show Formatted'>Show Raw</a>
  <textarea>acceleration = PVector.random2D();
// Random
acceleration.mult(random(2)); //[bold]</textarea>
  
  
  
  <div class="code-block">

  <div class='code-comment-pair no-comment'><code><pre><span class='one-line'><span class="n">acceleration</span> <span class="o">=</span> <span class="n">PVector</span><span class="o">.</span><span class="na">random2D</span><span class="o">();</span></span></pre></code></div>

  <div class='code-comment-pair '><div class='code-comment '>Random</div><code><pre><span class='one-line'><strong><span class="n">acceleration</span><span class="o">.</span><span class="na">mult</span><span class="o">(</span><span class="n">random</span><span class="o">(</span><span class="mi">2</span><span class="o">));</span></strong></span></pre></code></div>

</div>
  <div style="position: relative;clear:both;display:block;height:1px;width:100%;"></div>
</div><p>While this may seem like an obvious point, it’s crucial to understand that acceleration does not merely refer to the <em>speeding up</em> or <em>slowing down</em> of a moving object, but rather <em>any change</em> in velocity in either magnitude or direction.   Acceleration is used to steer an object, and we’ll see this again and again in future chapters as we begin to program objects that make decisions about how to move about the screen.</p>
<div class="example">
  <a id="chapter01_exercise6" style="display: block;"></a><h5 id="exercise-16">Exercise 1.6</h5><p>Referring back to the <a href="#intro_section6">Introduction</a>, implement acceleration according to Perlin noise.</p>

</div></section></section><section><a id="chapter01_section9" style="display: block;"></a><h3 id="19-static-vs-non-static-functions">1.9 Static vs. Non-Static Functions</h3><p><a id="functionsstatic-vs-non-static-821903c0-253f-0130-bab6-7cd1c3f718ad" style="display: block;"></a><a id="methods-static-vs-non-static-82191690-253f-0130-bab7-7cd1c3f718ad" style="display: block;"></a><a id="processingstatic-vs-non-static-methods-821926e0-253f-0130-bab8-7cd1c3f718ad" style="display: block;"></a></p>
<p>Before we get to Algorithm #3 (<em>accelerate towards the mouse</em>), we need to cover one more rather important aspect of working with vectors and the <span class="klass">PVector</span> class: the difference between using <strong><em>static</em></strong> methods and <strong><em>non-static</em></strong> methods.</p>
<p>Forgetting about vectors for a moment, take a look at the following code:</p>
<div class="source-code">
  <a class="toggle" href="#" data-to-raw='Show Raw' data-to-formatted='Show Formatted'>Show Raw</a>
  <textarea>float x = 0;
float y = 5;

x = x + y;</textarea>
  
  
  
  <div class="code-block">

  <div class='code-comment-pair no-comment'><code><pre><span class='one-line'><span class="kt">float</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span></span>
<span class='one-line'><span class="kt">float</span> <span class="n">y</span> <span class="o">=</span> <span class="mi">5</span><span class="o">;</span></span>
<span class='one-line'> </span>
<span class='one-line'><span class="n">x</span> <span class="o">=</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span><span class="o">;</span></span></pre></code></div>

</div>
  <div style="position: relative;clear:both;display:block;height:1px;width:100%;"></div>
</div><p>Pretty simple, right?  <span class="var">x</span> has the value of 0, we add <span class="var">y</span> to it, and now <span class="var">x</span> is equal to 5.  We could write the corresponding code pretty easily based on what we’ve learned about <span class="klass">PVector</span>.</p>
<div class="source-code">
  <a class="toggle" href="#" data-to-raw='Show Raw' data-to-formatted='Show Formatted'>Show Raw</a>
  <textarea>PVector v = new PVector(0,0);
PVector u = new PVector(4,5);
v.add(u);</textarea>
  
  
  
  <div class="code-block">

  <div class='code-comment-pair no-comment'><code><pre><span class='one-line'><span class="n">PVector</span> <span class="n">v</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PVector</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span><span class="mi">0</span><span class="o">);</span></span>
<span class='one-line'><span class="n">PVector</span> <span class="n">u</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PVector</span><span class="o">(</span><span class="mi">4</span><span class="o">,</span><span class="mi">5</span><span class="o">);</span></span>
<span class='one-line'><span class="n">v</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">u</span><span class="o">);</span></span></pre></code></div>

</div>
  <div style="position: relative;clear:both;display:block;height:1px;width:100%;"></div>
</div><p>The vector <span class="var">v</span> has the value of (0,0), we add <span class="var">u</span> to it, and now <span class="var">v</span> is equal to (4,5).  Easy, right?</p>
<p>Let’s take a look at another example of some simple floating point math:</p>
<div class="source-code">
  <a class="toggle" href="#" data-to-raw='Show Raw' data-to-formatted='Show Formatted'>Show Raw</a>
  <textarea>float x = 0;
float y = 5;

float z = x + y;</textarea>
  
  
  
  <div class="code-block">

  <div class='code-comment-pair no-comment'><code><pre><span class='one-line'><span class="kt">float</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span></span>
<span class='one-line'><span class="kt">float</span> <span class="n">y</span> <span class="o">=</span> <span class="mi">5</span><span class="o">;</span></span>
<span class='one-line'> </span>
<span class='one-line'><span class="kt">float</span> <span class="n">z</span> <span class="o">=</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span><span class="o">;</span></span></pre></code></div>

</div>
  <div style="position: relative;clear:both;display:block;height:1px;width:100%;"></div>
</div><p><span class="var">x</span> has the value of 0, we add <span class="var">y</span> to it, and store the result in a new variable <span class="var">z</span>.   The value of <span class="var">x</span> does not change in this example (neither does <span class="var">y</span>)!  This may seem like a trivial point, and one that is quite intuitive when it comes to mathematical operations with floats.   However, it’s not so obvious with mathematical operations in <span class="klass">PVector</span>.  Let’s try to write the code based on what we know so far.</p>
<div class="source-code">
  <a class="toggle" href="#" data-to-raw='Show Raw' data-to-formatted='Show Formatted'>Show Raw</a>
  <textarea>PVector v = new PVector(0,0);
PVector u = new PVector(4,5);
// Don’t be fooled; this is incorrect!!!
PVector w = v.add(u); //[line-through]</textarea>
  
  
  
  <div class="code-block">

  <div class='code-comment-pair no-comment'><code><pre><span class='one-line'><span class="n">PVector</span> <span class="n">v</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PVector</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span><span class="mi">0</span><span class="o">);</span></span>
<span class='one-line'><span class="n">PVector</span> <span class="n">u</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PVector</span><span class="o">(</span><span class="mi">4</span><span class="o">,</span><span class="mi">5</span><span class="o">);</span></span></pre></code></div>

  <div class='code-comment-pair '><div class='code-comment '>Don’t be fooled; this is incorrect!!!</div><code><pre><span class='one-line'><span class="line-through"><span class="n">PVector</span> <span class="n">w</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">u</span><span class="o">);</span></span></span></pre></code></div>

</div>
  <div style="position: relative;clear:both;display:block;height:1px;width:100%;"></div>
</div><p>The above might seem like a good guess, but it’s just not the way the <span class="klass">PVector</span> class works.   If we look at the definition of <span class="function">add()</span> . . .</p>
<div class="source-code">
  <a class="toggle" href="#" data-to-raw='Show Raw' data-to-formatted='Show Formatted'>Show Raw</a>
  <textarea>void add(PVector v) {
    x = x + v.x;
    y = y + v.y;
 }</textarea>
  
  
  
  <div class="code-block">

  <div class='code-comment-pair no-comment'><code><pre><span class='one-line'><span class="kt">void</span> <span class="nf">add</span><span class="o">(</span><span class="n">PVector</span> <span class="n">v</span><span class="o">)</span> <span class="o">{</span></span>
<span class='one-line'>    <span class="n">x</span> <span class="o">=</span> <span class="n">x</span> <span class="o">+</span> <span class="n">v</span><span class="o">.</span><span class="na">x</span><span class="o">;</span></span>
<span class='one-line'>    <span class="n">y</span> <span class="o">=</span> <span class="n">y</span> <span class="o">+</span> <span class="n">v</span><span class="o">.</span><span class="na">y</span><span class="o">;</span></span>
<span class='one-line'> <span class="o">}</span></span></pre></code></div>

</div>
  <div style="position: relative;clear:both;display:block;height:1px;width:100%;"></div>
</div><p>we see that this code does not accomplish our goal.  First, it does not return a new <span class="klass">PVector</span> (the return type is “void”) and second, it changes the value of the <span class="klass">PVector</span> upon which it is called.  In order to add two <span class="klass">PVector</span> objects together and return the result as a new <span class="klass">PVector</span>, we must use the static <span class="function">add()</span> function.</p>
<p><a id="static-functions-821a5010-253f-0130-bab9-7cd1c3f718ad" style="display: block;"></a></p>
<p>Functions that we call from the class name itself (rather than from a speciﬁc object instance) are known as <strong><em>static functions</em></strong>.   Here are two examples of function calls that assume two <span class="klass">PVector</span> objects, <span class="var">v</span> and <span class="var">u</span>:</p>
<div class="source-code">
  <a class="toggle" href="#" data-to-raw='Show Raw' data-to-formatted='Show Formatted'>Show Raw</a>
  <textarea>// Static: called from the class name.
PVector.add(v,u);
// Not static: called from an object instance.
v.add(u);</textarea>
  
  
  
  <div class="code-block">

  <div class='code-comment-pair '><div class='code-comment '>Static: called from the class name.</div><code><pre><span class='one-line'><span class="n">PVector</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">v</span><span class="o">,</span><span class="n">u</span><span class="o">);</span></span></pre></code></div>

  <div class='code-comment-pair '><div class='code-comment '>Not static: called from an object instance.</div><code><pre><span class='one-line'><span class="n">v</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">u</span><span class="o">);</span></span></pre></code></div>

</div>
  <div style="position: relative;clear:both;display:block;height:1px;width:100%;"></div>
</div><p>Since you can’t write static functions yourself in Processing, you might not have encountered them before.  <span class="klass">PVector</span>'s static functions allow us to perform generic mathematical operations on <span class="klass">PVector</span> objects without having to adjust the value of one of the input <span class="klass">PVector</span>s.  Let’s look at how we might write the static version of <span class="function">add()</span>:</p>
<div class="source-code">
  <a class="toggle" href="#" data-to-raw='Show Raw' data-to-formatted='Show Formatted'>Show Raw</a>
  <textarea>  //The static version of add allows us to add two PVectors together and assign the result to a new PVector while leaving the original PVectors (v and u above) intact.
  static PVector add(PVector v1, PVector v2) {



    PVector v3 = new PVector(v1.x + v2.x, v1.y + v2.y);
    return v3;
  }</textarea>
  
  
  
  <div class="code-block">

  <div class='code-comment-pair '><div class='code-comment '>The static version of add allows us to add two PVectors together and assign the result to a new PVector while leaving the original PVectors (v and u above) intact.</div><code><pre><span class='one-line'>  <span class="kd">static</span> <span class="n">PVector</span> <span class="nf">add</span><span class="o">(</span><span class="n">PVector</span> <span class="n">v1</span><span class="o">,</span> <span class="n">PVector</span> <span class="n">v2</span><span class="o">)</span> <span class="o">{</span></span>
<span class='one-line'> </span>
<span class='one-line'> </span>
<span class='one-line'> </span>
<span class='one-line'>    <span class="n">PVector</span> <span class="n">v3</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PVector</span><span class="o">(</span><span class="n">v1</span><span class="o">.</span><span class="na">x</span> <span class="o">+</span> <span class="n">v2</span><span class="o">.</span><span class="na">x</span><span class="o">,</span> <span class="n">v1</span><span class="o">.</span><span class="na">y</span> <span class="o">+</span> <span class="n">v2</span><span class="o">.</span><span class="na">y</span><span class="o">);</span></span>
<span class='one-line'>    <span class="k">return</span> <span class="n">v3</span><span class="o">;</span></span>
<span class='one-line'>  <span class="o">}</span></span></pre></code></div>

</div>
  <div style="position: relative;clear:both;display:block;height:1px;width:100%;"></div>
</div><p>There are several differences here:</p>
<div class="list">
	
	<ul>
		
			<li><p>
The function is labeled as <strong><em>static</em></strong>.
</p>
</li>
		
			<li><p>
The function does not have a <strong><em>void</em></strong> return type, but rather returns a <span class="klass">PVector</span>.
</p>
</li>
		
			<li><p>
The function creates a new <span class="klass">PVector</span> (<span class="var">v3</span>) and returns the sum of the components of <span class="var">v1</span> and <span class="var">v2</span> in that new <span class="klass">PVector</span>.
</p>
</li>
		
	</ul>
</div><p>When you call a static function, instead of referencing an actual object instance, you simply reference the name of the class itself.</p>
<div class="source-code">
  <a class="toggle" href="#" data-to-raw='Show Raw' data-to-formatted='Show Formatted'>Show Raw</a>
  <textarea>PVector v = new PVector(0,0);
PVector u = new PVector(4,5);
PVector w = v.add(u); //[line-through]
PVector w = PVector.add(v,u); //[bold]</textarea>
  
  
  
  <div class="code-block">

  <div class='code-comment-pair no-comment'><code><pre><span class='one-line'><span class="n">PVector</span> <span class="n">v</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PVector</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span><span class="mi">0</span><span class="o">);</span></span>
<span class='one-line'><span class="n">PVector</span> <span class="n">u</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PVector</span><span class="o">(</span><span class="mi">4</span><span class="o">,</span><span class="mi">5</span><span class="o">);</span></span>
<span class='one-line'><span class="line-through"><span class="n">PVector</span> <span class="n">w</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">u</span><span class="o">);</span></span></span>
<span class='one-line'><strong><span class="n">PVector</span> <span class="n">w</span> <span class="o">=</span> <span class="n">PVector</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">v</span><span class="o">,</span><span class="n">u</span><span class="o">);</span></strong></span></pre></code></div>

</div>
  <div style="position: relative;clear:both;display:block;height:1px;width:100%;"></div>
</div><p>The <span class="klass">PVector</span> class has static versions of <span class="function">add()</span>, <span class="function">sub()</span>, <span class="function">mult()</span>, and <span class="function">div()</span>.</p>
<div class="example">
  <a id="chapter01_exercise7" style="display: block;"></a><h4 id="exercise-17">Exercise 1.7</h4><p>Translate the following pseudocode to code using static or non-static functions where appropriate.</p>
<div class="list">
	
	<ul>
		
			<li><p>
The <span class="klass">PVector</span> <span class="var">v</span> equals (1,5).
</p>
</li>
		
			<li><p>
The <span class="klass">PVector</span> <span class="var">u</span> equals <span class="var">v</span> multiplied by 2.
</p>
</li>
		
			<li><p>
The <span class="klass">PVector</span> <span class="var">w</span> equals <span class="var">v</span> minus <span class="var">u</span>.
</p>
</li>
		
			<li><p>
Divide the <span class="klass">PVector</span> w by 3.
</p>
</li>
		
	</ul>
</div><div class="source-code">
  <a class="toggle" href="#" data-to-raw='Show Raw' data-to-formatted='Show Formatted'>Show Raw</a>
  <textarea>PVector v = new PVector(1,5);
PVector u = ________._____(__,__);
PVector w = ________._____(__,__);
___________;</textarea>
  
  
  
  <div class="code-block">

  <div class='code-comment-pair no-comment'><code><pre><span class='one-line'><span class="n">PVector</span> <span class="n">v</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PVector</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="mi">5</span><span class="o">);</span></span>
<span class='one-line'><span class="n">PVector</span> <span class="n">u</span> <span class="o">=</span> <span class="n">________</span><span class="o">.</span><span class="na">_____</span><span class="o">(</span><span class="n">__</span><span class="o">,</span><span class="n">__</span><span class="o">);</span></span>
<span class='one-line'><span class="n">PVector</span> <span class="n">w</span> <span class="o">=</span> <span class="n">________</span><span class="o">.</span><span class="na">_____</span><span class="o">(</span><span class="n">__</span><span class="o">,</span><span class="n">__</span><span class="o">);</span></span>
<span class='one-line'><span class="n">___________</span><span class="o">;</span></span></pre></code></div>

</div>
  <div style="position: relative;clear:both;display:block;height:1px;width:100%;"></div>
</div>
</div></section><section><a id="chapter01_section10" style="display: block;"></a><h3 id="110-interactivity-with-acceleration">1.10 Interactivity with Acceleration</h3><p><a id="acceleration-algorithmsinteractive-821d5cb0-253f-0130-baba-7cd1c3f718ad" style="display: block;"></a></p>
<a id="chapter01_figure14" style="display: block;"></a><div class="image-container half-width-right" >
	
	<img src="/book/imgs/chapter01/ch01_14.png" alt="Nature of Code Image" />
	
	<p class="caption">Figure 1.14</p>
</div>
<p>To finish out this chapter, let’s try something a bit more complex and a great deal more useful.  We’ll dynamically calculate an object’s acceleration according to a rule stated in Algorithm #3 — <em>the object accelerates towards the mouse</em>.</p>
<p>Anytime we want to calculate a vector based on a rule or a formula, we need to compute two things: <strong><em>magnitude</em></strong> and <strong><em>direction</em></strong>.  Let’s start with direction.  We know the acceleration vector should point from the object’s location towards the mouse location.  Let’s say the object is located at the point (<span class="var">x</span>,<span class="var">y</span>) and the mouse at (<span class="var">mouseX</span>,<span class="var">mouseY</span>).</p>
<a id="chapter01_figure15" style="display: block;"></a><div class="image-container half-width-right" >
	
	<img src="/book/imgs/chapter01/ch01_15.png" alt="Nature of Code Image" />
	
	<p class="caption">Figure 1.15</p>
</div>
<p>In Figure 1.15, we see that we can get a vector (<span class="var">dx</span>,<span class="var">dy</span>) by subtracting the object’s location from the mouse’s location.</p>
<div class="list">
	
	<ul>
		
			<li><p><span class="formula">dx = mouseX - x</span></p>
</li>
		
			<li><p><span class="formula">dy = mouseY - y</span></p>
</li>
		
	</ul>
</div><p>Let’s rewrite the above using <span class="klass">PVector</span> syntax.   Assuming we are in the <span class="klass">Mover</span> class and thus have access to the object’s <span class="klass">PVector location</span>, we then have:</p>
<div class="source-code">
  <a class="toggle" href="#" data-to-raw='Show Raw' data-to-formatted='Show Formatted'>Show Raw</a>
  <textarea>PVector mouse = new PVector(mouseX,mouseY);
// Look! We’re using the static reference to sub() because we want a new PVector pointing from one point to another.
PVector dir = PVector.sub(mouse,location);</textarea>
  
  
  
  <div class="code-block">

  <div class='code-comment-pair no-comment'><code><pre><span class='one-line'><span class="n">PVector</span> <span class="n">mouse</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PVector</span><span class="o">(</span><span class="n">mouseX</span><span class="o">,</span><span class="n">mouseY</span><span class="o">);</span></span></pre></code></div>

  <div class='code-comment-pair '><div class='code-comment '>Look! We’re using the static reference to sub() because we want a new PVector pointing from one point to another.</div><code><pre><span class='one-line'><span class="n">PVector</span> <span class="n">dir</span> <span class="o">=</span> <span class="n">PVector</span><span class="o">.</span><span class="na">sub</span><span class="o">(</span><span class="n">mouse</span><span class="o">,</span><span class="n">location</span><span class="o">);</span></span></pre></code></div>

</div>
  <div style="position: relative;clear:both;display:block;height:1px;width:100%;"></div>
</div><p>We now have a <span class="klass">PVector</span> that points from the mover’s location all the way to the mouse.  If the object were to actually accelerate using that vector, it would appear instantaneously at the mouse location.  This does not make for good animation, of course, and what we want to do now is decide how quickly that object should accelerate toward the mouse.</p>
<p>In order to set the magnitude (whatever it may be) of our acceleration <span class="klass">PVector</span>, we must first <em><em></em></em><em><em></em></em><em><em></em></em><em><em></em></em><em><em></em>___</em> that direction vector.  That’s right, you said it.  <em>Normalize</em>.   If we can shrink the vector down to its unit vector (of length one) then we have a vector that tells us the direction and can easily be scaled to any value.   One multiplied by anything equals anything.</p>
<div class="source-code">
  <a class="toggle" href="#" data-to-raw='Show Raw' data-to-formatted='Show Formatted'>Show Raw</a>
  <textarea>float anything = ?????
dir.normalize();
dir.mult(anything);</textarea>
  
  
  
  <div class="code-block">

  <div class='code-comment-pair no-comment'><code><pre><span class='one-line'><span class="kt">float</span> <span class="n">anything</span> <span class="o">=</span> <span class="o">?????</span></span>
<span class='one-line'><span class="n">dir</span><span class="o">.</span><span class="na">normalize</span><span class="o">();</span></span>
<span class='one-line'><span class="n">dir</span><span class="o">.</span><span class="na">mult</span><span class="o">(</span><span class="n">anything</span><span class="o">);</span></span></pre></code></div>

</div>
  <div style="position: relative;clear:both;display:block;height:1px;width:100%;"></div>
</div><p>To summarize, we take the following steps:</p>
<div class="list">
	
	<ol class="arabic">
		
			<li><p>
Calculate a vector that points from the object to the target location (mouse)
</p>
</li>
		
			<li><p>
Normalize that vector (reducing its length to 1)
</p>
</li>
		
			<li><p>
Scale that vector to an appropriate value (by multiplying it by some value)
</p>
</li>
		
			<li><p>
Assign that vector to acceleration
</p>
</li>
		
	</ol>
</div><p>And here are those steps in the <span class="function">update()</span> function itself:</p>
<div class="image-container screenshot" >
	
	<canvas data-processing-sources="/book/processingjs/chapter01/_1_10_motion101_acceleration/_1_10_motion101_acceleration.pde /book/processingjs/chapter01/_1_10_motion101_acceleration/Mover.pde" class="screenshot">
		<p>Your browser does not support the canvas tag.</p>
	</canvas>
  <div class="sketch-controls">
    <button class="reset">RESET</button>
    <button class="pause">PAUSE</button>
  </div>
	
	
</div>
<p><a id="chapter01_example10" style="display: block;"></a><span class="example">Example 1.10: Accelerating towards the mouse</span></p>
<div class="source-code">
  <a class="toggle" href="#" data-to-raw='Show Raw' data-to-formatted='Show Formatted'>Show Raw</a>
  <textarea> void update() {

    PVector mouse = new PVector(mouseX,mouseY);
    // Step 1: Compute direction
    PVector dir = PVector.sub(mouse,location);

    // Step 2: Normalize
    dir.normalize();

    // Step 3: Scale
    dir.mult(0.5);

    // Step 4: Accelerate
    acceleration = dir;

    velocity.add(acceleration);
    velocity.limit(topspeed);
    location.add(velocity);

  }</textarea>
  
  
  
  <div class="code-block">

  <div class='code-comment-pair no-comment'><code><pre><span class='one-line'> <span class="kt">void</span> <span class="nf">update</span><span class="o">()</span> <span class="o">{</span></span>
<span class='one-line'> </span>
<span class='one-line'>    <span class="n">PVector</span> <span class="n">mouse</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PVector</span><span class="o">(</span><span class="n">mouseX</span><span class="o">,</span><span class="n">mouseY</span><span class="o">);</span></span></pre></code></div>

  <div class='code-comment-pair '><div class='code-comment '>Step 1: Compute direction</div><code><pre><span class='one-line'>    <span class="n">PVector</span> <span class="n">dir</span> <span class="o">=</span> <span class="n">PVector</span><span class="o">.</span><span class="na">sub</span><span class="o">(</span><span class="n">mouse</span><span class="o">,</span><span class="n">location</span><span class="o">);</span></span>
<span class='one-line'> </span></pre></code></div>

  <div class='code-comment-pair '><div class='code-comment '>Step 2: Normalize</div><code><pre><span class='one-line'>    <span class="n">dir</span><span class="o">.</span><span class="na">normalize</span><span class="o">();</span></span>
<span class='one-line'> </span></pre></code></div>

  <div class='code-comment-pair '><div class='code-comment '>Step 3: Scale</div><code><pre><span class='one-line'>    <span class="n">dir</span><span class="o">.</span><span class="na">mult</span><span class="o">(</span><span class="mf">0.5</span><span class="o">);</span></span>
<span class='one-line'> </span></pre></code></div>

  <div class='code-comment-pair '><div class='code-comment '>Step 4: Accelerate</div><code><pre><span class='one-line'>    <span class="n">acceleration</span> <span class="o">=</span> <span class="n">dir</span><span class="o">;</span></span>
<span class='one-line'> </span>
<span class='one-line'>    <span class="n">velocity</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">acceleration</span><span class="o">);</span></span>
<span class='one-line'>    <span class="n">velocity</span><span class="o">.</span><span class="na">limit</span><span class="o">(</span><span class="n">topspeed</span><span class="o">);</span></span>
<span class='one-line'>    <span class="n">location</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">velocity</span><span class="o">);</span></span>
<span class='one-line'> </span>
<span class='one-line'>  <span class="o">}</span></span></pre></code></div>

</div>
  <div style="position: relative;clear:both;display:block;height:1px;width:100%;"></div>
</div><p>You may be wondering why the circle doesn’t stop when it reaches the target.  It’s important to note that the object moving has no knowledge about trying to stop at a destination; it only knows where the destination is and tries to go there as quickly as possible. Going as quickly as possible means it will inevitably overshoot the location and have to turn around, again going as quickly as possible towards the destination, overshooting it again, and so on and so forth.   Stay tuned; in later chapters we’ll learn how to program an object to <strong><em>arrive</em></strong> at a location (slow down on approach).</p>
<p>This example is remarkably close to the concept of gravitational attraction (in which the object is attracted to the mouse location).  Gravitational attraction will be covered in more detail in the next chapter. However, one thing missing here is that the strength of gravity (magnitude of acceleration) is inversely proportional to distance.  This means that the closer the object is to the mouse, the faster it accelerates.</p>
<div class="example">
  <a id="chapter01_exercise8" style="display: block;"></a><h4 id="exercise-18">Exercise 1.8</h4><p>Try implementing the above example with a variable magnitude of acceleration, stronger when it is either closer or farther away.</p>

</div><p>Let’s see what this example would look like with an array of movers (rather than just one).</p>
<div class="image-container screenshot" >
	
	<canvas data-processing-sources="/book/processingjs/chapter01/_1_11_motion101_acceleration_array/_1_11_motion101_acceleration_array.pde /book/processingjs/chapter01/_1_11_motion101_acceleration_array/Mover.pde" class="screenshot">
		<p>Your browser does not support the canvas tag.</p>
	</canvas>
  <div class="sketch-controls">
    <button class="reset">RESET</button>
    <button class="pause">PAUSE</button>
  </div>
	
	
</div>
<p><a id="chapter01_example11" style="display: block;"></a><span class="example">Example 1.11: Array of movers accelerating towards the mouse</span></p>
<div class="source-code">
  <a class="toggle" href="#" data-to-raw='Show Raw' data-to-formatted='Show Formatted'>Show Raw</a>
  <textarea>// An array of objects
Mover[] movers = new Mover[20];

void setup() {
  size(640,360);
  background(255);
  for (int i = 0; i < movers.length; i++) {
    // Initialize each object in the array.
    movers[i] = new Mover();
  }
}

void draw() {
  background(255);

  for (int i = 0; i < movers.length; i++) {
    //[full] Calling functions on all the objects in the array
    movers[i].update();
    movers[i].checkEdges();
    movers[i].display();
    //[end]
  }
}

class Mover {

  PVector location;
  PVector velocity;
  PVector acceleration;
  float topspeed;

  Mover() {
    location = new PVector(random(width),random(height));
    velocity = new PVector(0,0);
    topspeed = 4;
  }

  void update() {

    // <b><u>Our algorithm for calculating acceleration</b></u>:

    //[full] Find the vector pointing towards the mouse.
    PVector mouse = new PVector(mouseX,mouseY);
    PVector dir = PVector.sub(mouse,location);
    //[end]
    // Normalize.
    dir.normalize();
    // Scale.
    dir.mult(0.5);
    // Set to acceleration.
    acceleration = dir;

    //[full] Motion 101! Velocity changes by acceleration.  Location changes by velocity.
    velocity.add(acceleration);
    velocity.limit(topspeed);
    location.add(velocity);
    //[end]
  }

  // Display the Mover
  void display() {
    stroke(0);
    fill(175);
    ellipse(location.x,location.y,16,16);
  }

  // What to do at the edges
  void checkEdges() {

    if (location.x > width) {
      location.x = 0;
    } else if (location.x < 0) {
      location.x = width;
    }

    if (location.y > height) {
      location.y = 0;
    }  else if (location.y < 0) {
      location.y = height;
    }
  }
}</textarea>
  
  
  
  <div class="code-block">

  <div class='code-comment-pair '><div class='code-comment '>An array of objects</div><code><pre><span class='one-line'><span class="n">Mover</span><span class="o">[]</span> <span class="n">movers</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Mover</span><span class="o">[</span><span class="mi">20</span><span class="o">];</span></span>
<span class='one-line'> </span>
<span class='one-line'><span class="kt">void</span> <span class="nf">setup</span><span class="o">()</span> <span class="o">{</span></span>
<span class='one-line'>  <span class="n">size</span><span class="o">(</span><span class="mi">640</span><span class="o">,</span><span class="mi">360</span><span class="o">);</span></span>
<span class='one-line'>  <span class="n">background</span><span class="o">(</span><span class="mi">255</span><span class="o">);</span></span>
<span class='one-line'>  <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">movers</span><span class="o">.</span><span class="na">length</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span></span></pre></code></div>

  <div class='code-comment-pair '><div class='code-comment '>Initialize each object in the array.</div><code><pre><span class='one-line'>    <span class="n">movers</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Mover</span><span class="o">();</span></span>
<span class='one-line'>  <span class="o">}</span></span>
<span class='one-line'><span class="o">}</span></span>
<span class='one-line'> </span>
<span class='one-line'><span class="kt">void</span> <span class="nf">draw</span><span class="o">()</span> <span class="o">{</span></span>
<span class='one-line'>  <span class="n">background</span><span class="o">(</span><span class="mi">255</span><span class="o">);</span></span>
<span class='one-line'> </span>
<span class='one-line'>  <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">movers</span><span class="o">.</span><span class="na">length</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span></span></pre></code></div>

  <div class='code-comment-pair stretch'><div class='code-comment stretch'> Calling functions on all the objects in the array</div><code><pre><span class='one-line'>    <span class="n">movers</span><span class="o">[</span><span class="n">i</span><span class="o">].</span><span class="na">update</span><span class="o">();</span></span>
<span class='one-line'>    <span class="n">movers</span><span class="o">[</span><span class="n">i</span><span class="o">].</span><span class="na">checkEdges</span><span class="o">();</span></span>
<span class='one-line'>    <span class="n">movers</span><span class="o">[</span><span class="n">i</span><span class="o">].</span><span class="na">display</span><span class="o">();</span></span></pre></code><div style='position:relative;clear:both;display:block;height:1px;width:100%;'></div></div>

  <div class='code-comment-pair no-comment'><code><pre><span class='one-line'>  <span class="o">}</span></span>
<span class='one-line'><span class="o">}</span></span>
<span class='one-line'> </span>
<span class='one-line'><span class="kd">class</span> <span class="nc">Mover</span> <span class="o">{</span></span>
<span class='one-line'> </span>
<span class='one-line'>  <span class="n">PVector</span> <span class="n">location</span><span class="o">;</span></span>
<span class='one-line'>  <span class="n">PVector</span> <span class="n">velocity</span><span class="o">;</span></span>
<span class='one-line'>  <span class="n">PVector</span> <span class="n">acceleration</span><span class="o">;</span></span>
<span class='one-line'>  <span class="kt">float</span> <span class="n">topspeed</span><span class="o">;</span></span>
<span class='one-line'> </span>
<span class='one-line'>  <span class="n">Mover</span><span class="o">()</span> <span class="o">{</span></span>
<span class='one-line'>    <span class="n">location</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PVector</span><span class="o">(</span><span class="n">random</span><span class="o">(</span><span class="n">width</span><span class="o">),</span><span class="n">random</span><span class="o">(</span><span class="n">height</span><span class="o">));</span></span>
<span class='one-line'>    <span class="n">velocity</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PVector</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span><span class="mi">0</span><span class="o">);</span></span>
<span class='one-line'>    <span class="n">topspeed</span> <span class="o">=</span> <span class="mi">4</span><span class="o">;</span></span>
<span class='one-line'>  <span class="o">}</span></span>
<span class='one-line'> </span>
<span class='one-line'>  <span class="kt">void</span> <span class="nf">update</span><span class="o">()</span> <span class="o">{</span></span>
<span class='one-line'> </span></pre></code></div>

  <div class='code-comment-pair '><div class='code-comment '><b><u>Our algorithm for calculating acceleration</b></u>:</div><code><pre><span class='one-line'> </span></pre></code></div>

  <div class='code-comment-pair stretch'><div class='code-comment stretch'> Find the vector pointing towards the mouse.</div><code><pre><span class='one-line'>    <span class="n">PVector</span> <span class="n">mouse</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PVector</span><span class="o">(</span><span class="n">mouseX</span><span class="o">,</span><span class="n">mouseY</span><span class="o">);</span></span>
<span class='one-line'>    <span class="n">PVector</span> <span class="n">dir</span> <span class="o">=</span> <span class="n">PVector</span><span class="o">.</span><span class="na">sub</span><span class="o">(</span><span class="n">mouse</span><span class="o">,</span><span class="n">location</span><span class="o">);</span></span></pre></code><div style='position:relative;clear:both;display:block;height:1px;width:100%;'></div></div>

  <div class='code-comment-pair '><div class='code-comment '>
Normalize.</div><code><pre><span class='one-line'>    <span class="n">dir</span><span class="o">.</span><span class="na">normalize</span><span class="o">();</span></span></pre></code></div>

  <div class='code-comment-pair '><div class='code-comment '>Scale.</div><code><pre><span class='one-line'>    <span class="n">dir</span><span class="o">.</span><span class="na">mult</span><span class="o">(</span><span class="mf">0.5</span><span class="o">);</span></span></pre></code></div>

  <div class='code-comment-pair '><div class='code-comment '>Set to acceleration.</div><code><pre><span class='one-line'>    <span class="n">acceleration</span> <span class="o">=</span> <span class="n">dir</span><span class="o">;</span></span>
<span class='one-line'> </span></pre></code></div>

  <div class='code-comment-pair stretch'><div class='code-comment stretch'> Motion 101! Velocity changes by acceleration.  Location changes by velocity.</div><code><pre><span class='one-line'>    <span class="n">velocity</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">acceleration</span><span class="o">);</span></span>
<span class='one-line'>    <span class="n">velocity</span><span class="o">.</span><span class="na">limit</span><span class="o">(</span><span class="n">topspeed</span><span class="o">);</span></span>
<span class='one-line'>    <span class="n">location</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">velocity</span><span class="o">);</span></span></pre></code><div style='position:relative;clear:both;display:block;height:1px;width:100%;'></div></div>

  <div class='code-comment-pair no-comment'><code><pre><span class='one-line'>  <span class="o">}</span></span>
<span class='one-line'> </span></pre></code></div>

  <div class='code-comment-pair '><div class='code-comment '>Display the Mover</div><code><pre><span class='one-line'>  <span class="kt">void</span> <span class="nf">display</span><span class="o">()</span> <span class="o">{</span></span>
<span class='one-line'>    <span class="n">stroke</span><span class="o">(</span><span class="mi">0</span><span class="o">);</span></span>
<span class='one-line'>    <span class="n">fill</span><span class="o">(</span><span class="mi">175</span><span class="o">);</span></span>
<span class='one-line'>    <span class="n">ellipse</span><span class="o">(</span><span class="n">location</span><span class="o">.</span><span class="na">x</span><span class="o">,</span><span class="n">location</span><span class="o">.</span><span class="na">y</span><span class="o">,</span><span class="mi">16</span><span class="o">,</span><span class="mi">16</span><span class="o">);</span></span>
<span class='one-line'>  <span class="o">}</span></span>
<span class='one-line'> </span></pre></code></div>

  <div class='code-comment-pair '><div class='code-comment '>What to do at the edges</div><code><pre><span class='one-line'>  <span class="kt">void</span> <span class="nf">checkEdges</span><span class="o">()</span> <span class="o">{</span></span>
<span class='one-line'> </span>
<span class='one-line'>    <span class="k">if</span> <span class="o">(</span><span class="n">location</span><span class="o">.</span><span class="na">x</span> <span class="o">&gt;</span> <span class="n">width</span><span class="o">)</span> <span class="o">{</span></span>
<span class='one-line'>      <span class="n">location</span><span class="o">.</span><span class="na">x</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span></span>
<span class='one-line'>    <span class="o">}</span> <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">location</span><span class="o">.</span><span class="na">x</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span></span>
<span class='one-line'>      <span class="n">location</span><span class="o">.</span><span class="na">x</span> <span class="o">=</span> <span class="n">width</span><span class="o">;</span></span>
<span class='one-line'>    <span class="o">}</span></span>
<span class='one-line'> </span>
<span class='one-line'>    <span class="k">if</span> <span class="o">(</span><span class="n">location</span><span class="o">.</span><span class="na">y</span> <span class="o">&gt;</span> <span class="n">height</span><span class="o">)</span> <span class="o">{</span></span>
<span class='one-line'>      <span class="n">location</span><span class="o">.</span><span class="na">y</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span></span>
<span class='one-line'>    <span class="o">}</span>  <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">location</span><span class="o">.</span><span class="na">y</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span></span>
<span class='one-line'>      <span class="n">location</span><span class="o">.</span><span class="na">y</span> <span class="o">=</span> <span class="n">height</span><span class="o">;</span></span>
<span class='one-line'>    <span class="o">}</span></span>
<span class='one-line'>  <span class="o">}</span></span>
<span class='one-line'><span class="o">}</span></span></pre></code></div>

</div>
  <div style="position: relative;clear:both;display:block;height:1px;width:100%;"></div>
</div><div style="page-break-after:always;"> </div><a id="chapter01_figure16" style="display: block;"></a><div class="image-container screenshot" >
	
	<img src="/book/imgs/chapter01/ch01_16.png" alt="Nature of Code Image" />
	
	<p class="caption">Figure 1.16: The Ecosystem Project</p>
</div>
<div class="tip">
  <h4 id="the-ecosystem-project">The Ecosystem Project</h4><p><em>As mentioned in the preface, one way to use this book is to build a single project over the course of reading it, incorporating elements from each chapter one step at a time.  We’ll follow the development of an example project throughout this book—a simulation of an ecosystem.  Imagine a population of computational creatures swimming around a digital pond, interacting with each other according to various rules.</em></p>
<p>Step 1 Exercise:</p>
<p>Develop a set of rules for simulating the real-world behavior of a creature, such as a nervous fly, swimming fish, hopping bunny, slithering snake, etc.  Can you control the object’s motion by only manipulating the acceleration?  Try to give the creature a personality through its behavior (rather than through its visual design).</p>

</div><div style="page-break-after:always;"> </div></section>
  	</div>
  </div>

	<div id="bottom">
		<div id="footer">
			<div class="one-third" id="licenses">
        <h4>Licenses</h4>
        <p>
          <a class="license-badge" rel="license" href="http://creativecommons.org/licenses/by-nc/3.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc/3.0/88x31.png" /></a>
          <a class="license-badge" rel="license" href="http://creativecommons.org/licenses/LGPL/2.1/"><img alt="LGPL License" style="border-width:0" src="http://www.gnu.org/graphics/lgplv3-88x31.png" /></a>
        </p>

        <p>
          The book's text and illustrations are licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc/3.0/">Creative Commons Attribution-NonCommercial 3.0 Unported License</a>.
        </p>

        <p>
          All of the book's source code is licensed under the <a rel="license" href="http://creativecommons.org/licenses/LGPL/2.1/">GNU Lesser General Public License</a> as published by the Free Software Foundation; either version 2.1 of the License, or (at your option) any later version.
        </p>

      </div>

      <div class="one-third">
        <h4>Colophon</h4>

        <p>This book was generated with <a href="https://github.com/runemadsen/Magic-Book-Project">The Magic Book Project</a>.

        <p>This book would not have been possible without the generous support of <a href="http://www.kickstarter.com/projects/shiffman/the-nature-of-code-book-project">Kickstarter</a> backers.</p> 

        <p>This book is typeset on the web in Georgia with headers in Proxima Nova.</p>

        <p>Please report any mistakes in the book or bugs in the source with a <a href="https://github.com/shiffman/The-Nature-of-Code/issues?sort=created&state=open">GitHub issue</a> or contact me at <span class="eml">daniel at shiffman dot net</span>.</p>
      </div>

      <div class="one-third">
        <h4>Author</h4>
        <p>Daniel Shiffman is a professor of the <a href="http://itp.nyu.edu/">Interactive Telecommunications Program</a> at New York University.</p>

        <p>He is the author of <a href="http://www.learningprocessing.com/">Learning Processing</a>.</p>

        <p><a href="https://twitter.com/shiffman">Twitter</a> <a href="http://github.com/shiffman">GitHub</a></p>
      </div>
		</div>
	</div>
</body>
</html>
